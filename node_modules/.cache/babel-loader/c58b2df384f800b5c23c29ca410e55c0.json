{"ast":null,"code":"import _regeneratorRuntime from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import WeatherCurrentService from'../../adapters/WeatherCurrentService';import Pagination from'../current/Pagination';import FiltersComponent from'./Filters';import{Link}from\"react-router-dom\";import{getWeatherDescription,convertTemperature}from'../../businessLogic/WeatherBusinessLogic';import{temperatureDropdownList}from'../../buildingBlocks/commonBuildingBlocks';import'../../styles/common/Header.scss';import'../../styles/current/Filters.scss';import{nanoid}from\"nanoid\";var WeatherCurrent=/*#__PURE__*/function(_Component){_inherits(WeatherCurrent,_Component);var _super=_createSuper(WeatherCurrent);function WeatherCurrent(props){var _this;_classCallCheck(this,WeatherCurrent);_this=_super.call(this,props);_this.addFilterOperatorToExistingFilterName=function(event,filterName,filterOperator){var arr=_this.state.filters;arr.forEach(function(item,index,filters){if(item.hasOwnProperty([filterName])){filters[index][filterName][filterOperator]=event;}});return arr;};_this.onChangeFilter=function(event,filterName,filterOperator){// console.log(\"event: \" + JSON.stringify(event))\n// console.log(\"filters: \" + JSON.stringify(this.state.filters))\nvar index;if(event===\"\"&&_this.keyExistsInArr(_this.state.filters,filterName)){console.log(\"inside 1\");index=_this.findIndexInFilters(_this.state.filters,filterName);_this.setState({currentPage:1,isFilter:true,isAdditionalFilter:false,filters:_this.changeFilters(index,filterName,filterOperator)},function(){this.refreshWeathers(this.state.sortBy,this.state.weathers);});}else if(event!==\"\"&&!_this.keyExistsInArr(_this.state.filters,filterName)){console.log(\"inside 2\");_this.setState({currentPage:1,isFilter:true,isAdditionalFilter:true,filters:_this.state.filters.concat([_defineProperty({},filterName,_defineProperty({},filterOperator,event))])},function(){// console.log(\"filters inside: \" + this.state.filters)\nthis.refreshWeathers(this.state.sortBy,this.state.weathers);});}else if(event!==\"\"&&_this.keyExistsInArr(_this.state.filters,filterName)){console.log(\"inside 3\");index=_this.findIndexInFilters(_this.state.filters,filterName);_this.setState({currentPage:1,isFilter:true,isAdditionalFilter:_this.isAdditionalFilterCheck(event,index,filterName,filterOperator),filters:_this.addFilterOperatorToExistingFilterName(event,filterName,filterOperator)},function(){this.refreshWeathers(this.state.sortBy,this.state.weathers);});}else{console.log(\"inside 4\");}};_this.createForecast=function(){console.log(\"dfs\");return/*#__PURE__*/_jsx(Link,{to:\"/forecast\"});};_this.paginate=function(page){// if(currentPage !== 0 && currentPage <= lastPage)\n_this.setState({currentPage:page},function(){console.log(\"currPage: \"+this.state.currentPage);});};_this.getWeathersOnSpecificPage=function(){console.log('after pagination creation');var indexOfLastPost=_this.state.currentPage*_this.state.itemsPerPage;var indexOfFirstPost=indexOfLastPost-_this.state.itemsPerPage;return _this.state.weathers.slice(indexOfFirstPost,indexOfLastPost);};_this.state={weathers:[],isAscending:true,filters:[],isFilter:false,currentPage:1,itemsPerPage:1000,loading:false,isAdditionalFilter:false,pageNumbers:[],countries:[],descriptions:[],showPages:5,filterComponent:null,header:null,temperatureDropdownList:null,temperature:{units:'celsius',abbreviation:'Â°C'}};return _this;}//I added temperatureDropdownList, filterscomponent and header here because I do not want to rerender them\n//on every update. I cant use shouldComponentUpdate because they either are not components or are functional\n//meaning they are stateless\n_createClass(WeatherCurrent,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var countries,descriptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"som v componentDidMOunt weather list\");_context.next=3;return WeatherCurrentService.retrieveAllCountries();case 3:countries=_context.sent;_context.next=6;return WeatherCurrentService.retrieveAllDescriptions();case 6:descriptions=_context.sent;this.setState({countries:countries.data,descriptions:descriptions.data,temperatureDropdownList:temperatureDropdownList(function(units,abbreviation){_this2.setState({\"temperature\":{\"units\":units,\"abbreviation\":abbreviation}});}),filterComponent:/*#__PURE__*/_jsx(FiltersComponent,{temperatureUnits:this.state.temperature.units,countries:countries.data,descriptions:descriptions.data,onChangeMethod:this.onChangeFilter},nanoid()),header:this.header()},function(){this.refreshWeathers();});case 8:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"refreshWeathers\",value:function refreshWeathers(sortBy,weathers){var _this3=this;WeatherCurrentService.retrieveAllWeathers(sortBy,this.state.isAscending,this.state.filters,this.state.isFilter,this.state.isAdditionalFilter,weathers).then(function(response){_this3.setState({weathers:response.data});}).then(function(){if(sortBy)_this3.setState({isAscending:!_this3.state.isAscending});}).then(function(){if(typeof _this3.state.filters!=='undefined'&&_this3.state.filters===0)_this3.setState({isFilter:false});});}},{key:\"keyExistsInArr\",value:function keyExistsInArr(arr,key){var exists=false;console.log(\"arr inside keyExists: \"+JSON.stringify(arr));if(!Array.isArray(key)){arr===null||arr===void 0?void 0:arr.some(function(item){if(item.hasOwnProperty([key])){exists=true;return true;}else return false;});}//since countries and descriptions is a multicheckbox, they are arrays and it has multiple keys and must check not with equals\nelse{arr===null||arr===void 0?void 0:arr.some(function(item){if(item.includes([key])){exists=true;return true;}else return false;});}return exists;}},{key:\"findIndexInFilters\",value:function findIndexInFilters(arr,key){var indexOfKey=0;arr===null||arr===void 0?void 0:arr.some(function(filterName,index,filters){if(filterName.hasOwnProperty([key])){indexOfKey=index;return indexOfKey;}else return false;});return indexOfKey;}},{key:\"changeFilters\",value:function changeFilters(index,filterName,filterOperator){var arr=this.state.filters;console.log(\"arr inside changefilters: \"+JSON.stringify(arr));if(arr[index][filterName][filterOperator])delete arr[index][filterName][filterOperator];if(Object.keys(arr[index][filterName]).length===0)arr.splice(index,1);return arr;}},{key:\"isAdditionalFilterCheck\",value:function isAdditionalFilterCheck(event,index,filterName,filterOperator){if(this.isNotAdditionalFilterWithContains(event)===false)return false;console.log(\"this.state.filters[index][filterName][filterOperator]: \"+this.state.filters[index][filterName][filterOperator]);if(this.isSameFilterChanged(event,index,filterName,filterOperator)===false)return false;return true;}//if there are multiple countries and descriptions, backend must make a new query\n//since no additional filter is added, only value. I am unable to send query request\n//with an array element\n},{key:\"isNotAdditionalFilterWithContains\",value:function isNotAdditionalFilterWithContains(event){return event.includes(\",\")?false:true;}// this check is here for times when I change the same filter multiple\n// times in a row and the filter is same. If it is the same I cant filter\n// from memory because I could not load some weathers\n},{key:\"isSameFilterChanged\",value:function isSameFilterChanged(event,index,filterName,filterOperator){console.log(\"event: \"+event);console.log(\"this.state.filters[index][filterName][filterOperator]: \"+this.state.filters[index][filterName][filterOperator]);return filterName===this.state.filters[index][filterName];}},{key:\"header\",value:function header(){var _this4=this;return/*#__PURE__*/_jsx(\"thead\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"_id\",_this4.state.weathers);},children:\"cityId\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"name\",_this4.state.weathers);},children:\"city Name\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"coord.lat\",_this4.state.weathers);},children:\"latitude\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"coord.lon\",_this4.state.weathers);},children:\"longitude\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"sys.country\",_this4.state.weathers);},children:\"country\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.humidity\",_this4.state.weathers);},children:\"humidity\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.feels_like\",_this4.state.weathers);},children:\"feels like\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.temp\",_this4.state.weathers);},children:\"temperature\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.temp_max\",_this4.state.weathers);},children:\"maximum temperature\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.temp_min\",_this4.state.weathers);},children:\"minimal temperature\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weather.description\",_this4.state.weathers);},children:\"description\"})]})});}},{key:\"mainBody\",value:function mainBody(currentPosts,temperature){return/*#__PURE__*/_jsx(\"tbody\",{children:currentPosts.map(function(weather){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:weather._id}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(Link,{to:{pathname:\"/forecast\",state:{\"lat\":weather.coord.lat,\"lon\":weather.coord.lon}},children:weather.name})]}),/*#__PURE__*/_jsx(\"td\",{children:weather.coord.lat}),/*#__PURE__*/_jsx(\"td\",{children:weather.coord.lon}),/*#__PURE__*/_jsx(\"td\",{children:weather.sys.country}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.humidity}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(convertTemperature(temperature.units,weather.weatherMain.feels_like).toFixed(2)).concat(temperature.abbreviation)}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(convertTemperature(temperature.units,weather.weatherMain.temp).toFixed(2)).concat(temperature.abbreviation)}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(convertTemperature(temperature.units,weather.weatherMain.temp_max).toFixed(2)).concat(temperature.abbreviation)}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(convertTemperature(temperature.units,weather.weatherMain.temp_min).toFixed(2)).concat(temperature.abbreviation)}),/*#__PURE__*/_jsx(\"td\",{children:getWeatherDescription(weather)})]},nanoid());})});}},{key:\"render\",value:function render(){console.log(\"som v render weather list\");var currentWeathers=this.getWeathersOnSpecificPage();var filters=this.state.filterComponent;var pagination=/*#__PURE__*/_jsx(Pagination,{currentPage:this.state.currentPage,showPages:this.state.showPages,itemsPerPage:this.state.itemsPerPage,totalItems:this.state.weathers.length,paginate:this.paginate},nanoid());var temperatureDropdown=this.state.temperatureDropdownList;var container=[temperatureDropdown,filters,pagination];if(this.state.weathers)container.push(/*#__PURE__*/_jsxs(\"table\",{className:\"weatherTable\",children:[this.state.header,this.mainBody(currentWeathers,this.state.temperature)]},nanoid()));return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:container});}}]);return WeatherCurrent;}(Component);export default WeatherCurrent;","map":{"version":3,"sources":["/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/components/current/WeatherCurrent.js"],"names":["React","Component","WeatherCurrentService","Pagination","FiltersComponent","Link","getWeatherDescription","convertTemperature","temperatureDropdownList","nanoid","WeatherCurrent","props","addFilterOperatorToExistingFilterName","event","filterName","filterOperator","arr","state","filters","forEach","item","index","hasOwnProperty","onChangeFilter","keyExistsInArr","console","log","findIndexInFilters","setState","currentPage","isFilter","isAdditionalFilter","changeFilters","refreshWeathers","sortBy","weathers","concat","isAdditionalFilterCheck","createForecast","paginate","page","getWeathersOnSpecificPage","indexOfLastPost","itemsPerPage","indexOfFirstPost","slice","isAscending","loading","pageNumbers","countries","descriptions","showPages","filterComponent","header","temperature","units","abbreviation","retrieveAllCountries","retrieveAllDescriptions","data","retrieveAllWeathers","then","response","key","exists","JSON","stringify","Array","isArray","some","includes","indexOfKey","Object","keys","length","splice","isNotAdditionalFilterWithContains","isSameFilterChanged","currentPosts","map","weather","_id","pathname","coord","lat","lon","name","sys","country","weatherMain","humidity","feels_like","toFixed","temp","temp_max","temp_min","currentWeathers","pagination","temperatureDropdown","container","push","mainBody"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport WeatherCurrentService from '../../adapters/WeatherCurrentService';\nimport Pagination from '../current/Pagination'\nimport FiltersComponent from './Filters'\nimport { Link } from \"react-router-dom\";\nimport {getWeatherDescription, convertTemperature} from '../../businessLogic/WeatherBusinessLogic';\nimport {temperatureDropdownList} from '../../buildingBlocks/commonBuildingBlocks'\nimport '../../styles/common/Header.scss';\nimport '../../styles/current/Filters.scss'\nimport { nanoid } from \"nanoid\";\n\nclass WeatherCurrent extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            weathers: [],\n            isAscending: true,\n            filters: [],\n            isFilter : false,\n            currentPage : 1,\n            itemsPerPage : 1000,\n            loading : false,\n            isAdditionalFilter : false,\n            pageNumbers : [],\n            countries : [],\n            descriptions: [],\n            showPages: 5,\n            filterComponent: null,\n            header: null,\n            temperatureDropdownList: null,\n            temperature: {units: 'celsius', abbreviation: 'Â°C'},            \n        }\n    }\n\n    //I added temperatureDropdownList, filterscomponent and header here because I do not want to rerender them\n    //on every update. I cant use shouldComponentUpdate because they either are not components or are functional\n    //meaning they are stateless\n    async componentDidMount() {\n        console.log(\"som v componentDidMOunt weather list\")\n        const countries = await WeatherCurrentService.retrieveAllCountries()\n        const descriptions = await WeatherCurrentService.retrieveAllDescriptions()\n        this.setState({countries : countries.data, descriptions : descriptions.data, \n            temperatureDropdownList:temperatureDropdownList( (units, abbreviation ) => {\n                this.setState({\"temperature\": {\"units\" : units, \"abbreviation\" : abbreviation}})\n            }),\n            filterComponent:  <FiltersComponent key={nanoid()} temperatureUnits = {this.state.temperature.units} countries = {countries.data}\n            descriptions = {descriptions.data} onChangeMethod={this.onChangeFilter} />,\n            header: this.header()},\n            function() {this.refreshWeathers()}\n        )\n        \n    }\n\n    refreshWeathers(sortBy, weathers) {\n\n        WeatherCurrentService.retrieveAllWeathers(sortBy, this.state.isAscending, this.state.filters, this.state.isFilter, this.state.isAdditionalFilter, weathers)\n            .then(\n                response => {\n                    this.setState({ weathers: response.data })\n                }\n            ).then( () => {if (sortBy) this.setState({isAscending : !this.state.isAscending})}\n            ).then( () => {if (typeof this.state.filters !== 'undefined' && this.state.filters === 0) this.setState({isFilter : false})})\n    }\n\n    keyExistsInArr(arr, key){\n        let exists = false\n        console.log(\"arr inside keyExists: \" + JSON.stringify(arr))\n        if (!Array.isArray(key)){\n            arr?.some(item => {\n                if(item.hasOwnProperty([key])) {\n                    exists = true;\n                    return true\n                }\n                else return false\n            })\n        }\n        //since countries and descriptions is a multicheckbox, they are arrays and it has multiple keys and must check not with equals\n        else{\n            arr?.some(item => {\n                if(item.includes([key])) {\n                    exists = true;\n                    return true\n                }\n                else return false\n            })\n        }\n        return exists\n    }\n\n    findIndexInFilters(arr, key){\n        let indexOfKey = 0\n        arr?.some((filterName, index, filters) => {\n            if(filterName.hasOwnProperty([key])){ \n                indexOfKey = index\n                return indexOfKey\n            }\n            else return false\n        })\n        return indexOfKey\n    }\n\n    changeFilters(index, filterName, filterOperator) {\n        let arr = this.state.filters\n        console.log(\"arr inside changefilters: \" + JSON.stringify(arr))\n\n        if (arr[index][filterName][filterOperator])\n            delete arr[index][filterName][filterOperator]  \n        if (Object.keys(arr[index][filterName]).length === 0)\n            arr.splice(index, 1)\n        return arr\n    }\n\n    addFilterOperatorToExistingFilterName = (event, filterName, filterOperator) => {\n        const arr = this.state.filters\n        arr.forEach((item, index, filters) => {\n            if (item.hasOwnProperty([filterName])){\n                filters[index][filterName][filterOperator] = event\n            }\n        })\n        return arr\n    }\n\n    onChangeFilter = (event, filterName, filterOperator) => {\n        // console.log(\"event: \" + JSON.stringify(event))\n        // console.log(\"filters: \" + JSON.stringify(this.state.filters))\n        var index;\n\n        if (event === \"\" && this.keyExistsInArr(this.state.filters,filterName))  {\n            console.log(\"inside 1\")\n\n            index = this.findIndexInFilters(this.state.filters, filterName)\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : false, filters : this.changeFilters(index, filterName, filterOperator)}, function () {\n                this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n        }\n\n        else if (event !== \"\" && !(this.keyExistsInArr(this.state.filters, filterName))){\n            console.log(\"inside 2\")\n\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : true,\n                 filters: this.state.filters.concat([{[filterName]: {[filterOperator] : event}}])}, function () {\n                // console.log(\"filters inside: \" + this.state.filters)\n                this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n\n        }\n\n        else if (event !== \"\" && (this.keyExistsInArr(this.state.filters, filterName))){\n           \n            console.log(\"inside 3\")\n            index = this.findIndexInFilters(this.state.filters, filterName)\n\n            \n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : this.isAdditionalFilterCheck(event, index, filterName, filterOperator), \n                filters : this.addFilterOperatorToExistingFilterName(event, filterName, filterOperator)}, function() {\n                    this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n           \n        }\n        else {\n            console.log(\"inside 4\")\n\n        }\n    }\n\n    isAdditionalFilterCheck(event, index, filterName, filterOperator){\n        if (this.isNotAdditionalFilterWithContains(event) === false)\n            return false\n        console.log(\"this.state.filters[index][filterName][filterOperator]: \" + this.state.filters[index][filterName][filterOperator])\n        if (this.isSameFilterChanged(event, index, filterName, filterOperator) === false)\n            return false\n        return true\n                \n    }   \n\n    //if there are multiple countries and descriptions, backend must make a new query\n    //since no additional filter is added, only value. I am unable to send query request\n    //with an array element\n    isNotAdditionalFilterWithContains(event){\n       return event.includes(\",\") ? false : true\n    }\n    \n    // this check is here for times when I change the same filter multiple\n    // times in a row and the filter is same. If it is the same I cant filter\n    // from memory because I could not load some weathers\n    isSameFilterChanged(event, index, filterName, filterOperator){\n        console.log(\"event: \" + event)\n        console.log(\"this.state.filters[index][filterName][filterOperator]: \" + this.state.filters[index][filterName][filterOperator])\n       return filterName === this.state.filters[index][filterName]\n    }\n    header(){\n       return (<thead className=\"header\">\n       <tr>\n           <th onClick={() =>this.refreshWeathers(\"_id\", this.state.weathers) }>{\"cityId\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"name\", this.state.weathers) }>{\"city Name\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lat\", this.state.weathers) }>{\"latitude\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lon\", this.state.weathers) }>{\"longitude\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"sys.country\", this.state.weathers) }>{\"country\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.humidity\", this.state.weathers) }>{\"humidity\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.feels_like\", this.state.weathers) }>{\"feels like\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp\", this.state.weathers) }>{\"temperature\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_max\", this.state.weathers) }>{\"maximum temperature\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_min\", this.state.weathers) }>{\"minimal temperature\"}</th>\n           <th onClick={() =>this.refreshWeathers(\"weather.description\", this.state.weathers) }>{\"description\"}</th>                                \n       </tr>\n   </thead>)\n   }\n\ncreateForecast = ()=>{\n    console.log(\"dfs\")\n    return (\n        <Link  to= '/forecast'></Link>\n    );\n}\n\n   mainBody(currentPosts, temperature){\n    return (\n\n    <tbody>\n        {\n            currentPosts.map(\n                weather =>{\n                    return (<tr key={nanoid()}>\n                        <td>{weather._id}</td>\n                        <td> <Link to={{pathname: \"/forecast\", state: {\"lat\": weather.coord.lat, \"lon\": weather.coord.lon} }}>{weather.name}</Link></td>\n                        <td>{weather.coord.lat}</td>\n                        <td>{weather.coord.lon}</td>\n                        <td>{weather.sys.country}</td>\n                        <td>{weather.weatherMain.humidity}</td>\n                        <td>{`${convertTemperature(temperature.units, weather.weatherMain.feels_like).toFixed(2)}${temperature.abbreviation}`}</td>\n                        <td>{`${convertTemperature(temperature.units, weather.weatherMain.temp).toFixed(2)}${temperature.abbreviation}`}</td>\n                        <td>{`${convertTemperature(temperature.units, weather.weatherMain.temp_max).toFixed(2)}${temperature.abbreviation}`}</td>\n                        <td>{`${convertTemperature(temperature.units, weather.weatherMain.temp_min).toFixed(2)}${temperature.abbreviation}`}</td>\n                        <td>{getWeatherDescription(weather)}</td>\n                    </tr>)}\n            )\n        }\n        </tbody>\n    )\n   }\n\n    paginate = (page) => {\n        // if(currentPage !== 0 && currentPage <= lastPage)\n       this.setState({currentPage : page}, function(){\n           console.log(\"currPage: \" + this.state.currentPage)\n       })\n\n    }\n\n    getWeathersOnSpecificPage = () => {\n        console.log('after pagination creation')\n        const indexOfLastPost = this.state.currentPage * this.state.itemsPerPage;\n        const indexOfFirstPost = indexOfLastPost - this.state.itemsPerPage;\n        return this.state.weathers.slice(indexOfFirstPost, indexOfLastPost);\n    }\n\n    render() {\n        console.log(\"som v render weather list\")\n\n\n        const currentWeathers = this.getWeathersOnSpecificPage()\n        const filters = this.state.filterComponent\n\n        const pagination = <Pagination key={nanoid()} currentPage={this.state.currentPage} showPages={this.state.showPages}\n        itemsPerPage = {this.state.itemsPerPage} totalItems = {this.state.weathers.length} paginate={this.paginate}/>\n\n        const temperatureDropdown = this.state.temperatureDropdownList\n\n        let container= [temperatureDropdown, filters, pagination]\n\n        if (this.state.weathers)\n            container.push(<table key={nanoid()} className=\"weatherTable\">\n                {this.state.header}\n                {this.mainBody(currentWeathers, this.state.temperature)}\n            </table>\n            )\n\n        return (\n            <div className=\"container\">\n             {container}\n            </div>\n        )\n         \n    }\n}\nexport default WeatherCurrent\n"]},"metadata":{},"sourceType":"module"}