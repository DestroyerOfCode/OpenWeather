{"ast":null,"code":"import _defineProperty from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import WeatherService from'../service/WeatherService';import Pagination from'./Pagination';var WeatherListComponent=/*#__PURE__*/function(_Component){_inherits(WeatherListComponent,_Component);var _super=_createSuper(WeatherListComponent);function WeatherListComponent(props){var _this;_classCallCheck(this,WeatherListComponent);_this=_super.call(this,props);_this.addFilterOperatorToExistingFilterName=function(event,filterName,filterOperator){var arr=_this.state.filters;arr.forEach(function(item,index,filters){if(item.hasOwnProperty([filterName])){filters[index][filterName][filterOperator]=event.target.value;}});return arr;};_this.paginate=function(currentPage){_this.setState({currentPage:currentPage});};_this.state={weathers:[],isAscending:true,filters:[],isFilter:false,currentPage:1,itemsPerPage:1000,loading:false,isAdditionalFilter:false,pageNumbers:[]};return _this;}_createClass(WeatherListComponent,[{key:\"componentDidMount\",value:function componentDidMount(){console.log(\"som v componentDidMOunt\");this.refreshWeathers();}},{key:\"refreshWeathers\",value:function refreshWeathers(sortBy,weathers){var _this2=this;WeatherService.retrieveAllWeathers(sortBy,this.state.isAscending,this.state.filters,this.state.isFilter,this.state.isAdditionalFilter,weathers).then(function(response){_this2.setState({weathers:response.data});}).then(function(){if(sortBy)_this2.setState({isAscending:!_this2.state.isAscending});}).then(function(){if(typeof _this2.state.filters!=='undefined'&&_this2.state.pageNumbers.filters===0)_this2.setState({isFilter:false});});}},{key:\"keyExistsInArr\",value:function keyExistsInArr(arr,key){var exists=false;console.log(\"arr inside keyExists: \"+JSON.stringify(arr));arr===null||arr===void 0?void 0:arr.some(function(item){if(item.hasOwnProperty([key])){exists=true;return true;}else return false;});return exists;}},{key:\"findIndexInFilters\",value:function findIndexInFilters(arr,key){var indexOfKey=0;arr===null||arr===void 0?void 0:arr.some(function(filterName,index,filters){if(filterName.hasOwnProperty([key])){indexOfKey=index;return indexOfKey;}else return false;});return indexOfKey;}},{key:\"changeFilters\",value:function changeFilters(index,filterName,filterOperator){var arr=this.state.filters;console.log(\"arr inside changefilters: \"+JSON.stringify(arr));if(arr[index][filterName][filterOperator])delete arr[index][filterName][filterOperator];if(Object.keys(arr[index][filterName]).length===0)arr.splice(index,1);return arr;}},{key:\"onBlurEvent\",value:function onBlurEvent(event,filterName,filterOperator){if(event.target.value===\"\"&&this.keyExistsInArr(this.state.filters,filterName)){var index=this.findIndexInFilters(this.state.filters,filterName);this.setState({currentPage:1,isFilter:true,isAdditionalFilter:false,filters:this.changeFilters(index,filterName,filterOperator)},function(){this.refreshWeathers(this.state.sortBy,this.state.weathers);});}else if(event.target.value!==\"\"&&!this.keyExistsInArr(this.state.filters,filterName)){this.setState({currentPage:1,isFilter:true,isAdditionalFilter:true,filters:this.state.filters.concat([_defineProperty({},filterName,_defineProperty({},filterOperator,event.target.value))])},function(){console.log(\"filters inside: \"+this.state.filters);this.refreshWeathers(this.state.sortBy,this.state.weathers);});}else if(event.target.value!==\"\"&&this.keyExistsInArr(this.state.filters,filterName)){this.setState({currentPage:1,isFilter:true,isAdditionalFilter:true,filters:this.addFilterOperatorToExistingFilterName(event,filterName,filterOperator)},function(){this.refreshWeathers(this.state.sortBy,this.state.weathers);});}else{console.log(\"inside 4\");}}},{key:\"filters\",value:function filters(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Id\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"_id\",\"eq\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"City name\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"name\",\"eq\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Country\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"sys.country\",\"eq\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Latitude smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"coord.lat\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Latitude bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"coord.lat\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Longitude smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"coord.lon\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Longitude bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"coord.lon\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Humidity smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.humidity\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Humidity bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.humidity\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Feel temperature smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.feels_like\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Feel temperature bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.feels_like\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature max smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp_max\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature max bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp_max\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature min smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp_min\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature min bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp_min\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"description\",\"eq\");}})]});}},{key:\"header\",value:function header(){var _this4=this;return/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"_id\",_this4.state.weathers);},children:\"cityId\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"name\",_this4.state.weathers);},children:\"city Name\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"coord.lat\",_this4.state.weathers);},children:\"latitude\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"coord.lon\",_this4.state.weathers);},children:\"longitude\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"sys.country\",_this4.state.weathers);},children:\"country\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.humidity\",_this4.state.weathers);},children:\"humidity\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.feels_like\",_this4.state.weathers);},children:\"feels like\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.temp\",_this4.state.weathers);},children:\"temperature\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.temp_max\",_this4.state.weathers);},children:\"maximum temperature\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.temp_min\",_this4.state.weathers);},children:\"minimal temperature\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"description\",_this4.state.weathers);},children:\"description\"})]})});}},{key:\"mainBody\",value:function mainBody(currentPosts){return/*#__PURE__*/_jsx(\"tbody\",{children:currentPosts.map(function(weather){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:weather._id}),/*#__PURE__*/_jsx(\"td\",{children:weather.name}),/*#__PURE__*/_jsx(\"td\",{children:weather.coord.lat}),/*#__PURE__*/_jsx(\"td\",{children:weather.coord.lon}),/*#__PURE__*/_jsx(\"td\",{children:weather.sys.country}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.humidity}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.feels_like}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.temp}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.temp_max}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.temp_min}),/*#__PURE__*/_jsx(\"td\",{children:weather.weather[0].description})]},weather._id);})});}},{key:\"render\",value:function render(){console.log(\"som v render\");var pagination=/*#__PURE__*/_jsx(Pagination,{itemsPerPage:this.state.itemsPerPage,totalItems:this.state.weathers.length,paginate:this.paginate.bind()});var indexOfLastPost=this.state.currentPage*this.state.itemsPerPage;var indexOfFirstPost=indexOfLastPost-this.state.itemsPerPage;var currentWeathers=this.state.weathers.slice(indexOfFirstPost,indexOfLastPost);var container=[this.filters(),pagination];if(this.state.weathers)container.push(/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[this.header(),this.mainBody(currentWeathers)]}));return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:container});}}]);return WeatherListComponent;}(Component);export default WeatherListComponent;","map":{"version":3,"sources":["/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/component/WeatherListComponent.js"],"names":["React","Component","WeatherService","Pagination","WeatherListComponent","props","addFilterOperatorToExistingFilterName","event","filterName","filterOperator","arr","state","filters","forEach","item","index","hasOwnProperty","target","value","paginate","currentPage","setState","weathers","isAscending","isFilter","itemsPerPage","loading","isAdditionalFilter","pageNumbers","console","log","refreshWeathers","sortBy","retrieveAllWeathers","then","response","data","key","exists","JSON","stringify","some","indexOfKey","Object","keys","length","splice","keyExistsInArr","findIndexInFilters","changeFilters","concat","onBlurEvent","currentPosts","map","weather","_id","name","coord","lat","lon","sys","country","weatherMain","humidity","feels_like","temp","temp_max","temp_min","description","pagination","bind","indexOfLastPost","indexOfFirstPost","currentWeathers","slice","container","push","header","mainBody"],"mappings":"+xBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,cAAP,KAA2B,2BAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,C,GAEMC,CAAAA,oB,4HACF,8BAAYC,KAAZ,CAAmB,sDACf,uBAAMA,KAAN,EADe,MAmEnBC,qCAnEmB,CAmEqB,SAACC,KAAD,CAAQC,UAAR,CAAoBC,cAApB,CAAuC,CAC3E,GAAMC,CAAAA,GAAG,CAAG,MAAKC,KAAL,CAAWC,OAAvB,CACAF,GAAG,CAACG,OAAJ,CAAY,SAACC,IAAD,CAAOC,KAAP,CAAcH,OAAd,CAA0B,CAClC,GAAIE,IAAI,CAACE,cAAL,CAAoB,CAACR,UAAD,CAApB,CAAJ,CAAsC,CAClCI,OAAO,CAACG,KAAD,CAAP,CAAeP,UAAf,EAA2BC,cAA3B,EAA6CF,KAAK,CAACU,MAAN,CAAaC,KAA1D,CACH,CACJ,CAJD,EAKA,MAAOR,CAAAA,GAAP,CACH,CA3EkB,OA+KnBS,QA/KmB,CA+KR,SAACC,WAAD,CAAiB,CACzB,MAAKC,QAAL,CAAc,CAACD,WAAW,CAAGA,WAAf,CAAd,EACF,CAjLkB,CAEf,MAAKT,KAAL,CAAa,CACTW,QAAQ,CAAE,EADD,CAETC,WAAW,CAAE,IAFJ,CAGTX,OAAO,CAAE,EAHA,CAITY,QAAQ,CAAG,KAJF,CAKTJ,WAAW,CAAG,CALL,CAMTK,YAAY,CAAG,IANN,CAOTC,OAAO,CAAG,KAPD,CAQTC,kBAAkB,CAAG,KARZ,CASTC,WAAW,CAAG,EATL,CAAb,CAFe,aAalB,C,8FAEmB,CAChBC,OAAO,CAACC,GAAR,CAAY,yBAAZ,EACA,KAAKC,eAAL,GACH,C,wDAEeC,M,CAAQV,Q,CAAU,iBAC9BpB,cAAc,CAAC+B,mBAAf,CAAmCD,MAAnC,CAA2C,KAAKrB,KAAL,CAAWY,WAAtD,CAAmE,KAAKZ,KAAL,CAAWC,OAA9E,CAAuF,KAAKD,KAAL,CAAWa,QAAlG,CAA4G,KAAKb,KAAL,CAAWgB,kBAAvH,CAA2IL,QAA3I,EACKY,IADL,CAEQ,SAAAC,QAAQ,CAAI,CACR,MAAI,CAACd,QAAL,CAAc,CAAEC,QAAQ,CAAEa,QAAQ,CAACC,IAArB,CAAd,EACH,CAJT,EAKMF,IALN,CAKY,UAAM,CAAC,GAAIF,MAAJ,CAAY,MAAI,CAACX,QAAL,CAAc,CAACE,WAAW,CAAG,CAAC,MAAI,CAACZ,KAAL,CAAWY,WAA3B,CAAd,EAAuD,CALtF,EAMMW,IANN,CAMY,UAAM,CAAC,GAAI,MAAO,CAAA,MAAI,CAACvB,KAAL,CAAWC,OAAlB,GAA8B,WAA9B,EAA6C,MAAI,CAACD,KAAL,CAAWiB,WAAX,CAAuBhB,OAAvB,GAAmC,CAApF,CAAuF,MAAI,CAACS,QAAL,CAAc,CAACG,QAAQ,CAAG,KAAZ,CAAd,EAAkC,CAN5I,EAOH,C,sDAEcd,G,CAAK2B,G,CAAI,CACpB,GAAIC,CAAAA,MAAM,CAAG,KAAb,CACAT,OAAO,CAACC,GAAR,CAAY,yBAA2BS,IAAI,CAACC,SAAL,CAAe9B,GAAf,CAAvC,EAEAA,GAAG,OAAH,EAAAA,GAAG,SAAH,QAAAA,GAAG,CAAE+B,IAAL,CAAU,SAAA3B,IAAI,CAAI,CACd,GAAGA,IAAI,CAACE,cAAL,CAAoB,CAACqB,GAAD,CAApB,CAAH,CAA+B,CAC3BC,MAAM,CAAG,IAAT,CACA,MAAO,KAAP,CACH,CAHD,IAIK,OAAO,MAAP,CACR,CAND,EAOA,MAAOA,CAAAA,MAAP,CACH,C,8DAEkB5B,G,CAAK2B,G,CAAI,CACxB,GAAIK,CAAAA,UAAU,CAAG,CAAjB,CACAhC,GAAG,OAAH,EAAAA,GAAG,SAAH,QAAAA,GAAG,CAAE+B,IAAL,CAAU,SAACjC,UAAD,CAAaO,KAAb,CAAoBH,OAApB,CAAgC,CACtC,GAAGJ,UAAU,CAACQ,cAAX,CAA0B,CAACqB,GAAD,CAA1B,CAAH,CAAoC,CAChCK,UAAU,CAAG3B,KAAb,CACA,MAAO2B,CAAAA,UAAP,CACH,CAHD,IAIK,OAAO,MAAP,CACR,CAND,EAOA,MAAOA,CAAAA,UAAP,CACH,C,oDAEa3B,K,CAAOP,U,CAAYC,c,CAAgB,CAC7C,GAAIC,CAAAA,GAAG,CAAG,KAAKC,KAAL,CAAWC,OAArB,CACAiB,OAAO,CAACC,GAAR,CAAY,6BAA+BS,IAAI,CAACC,SAAL,CAAe9B,GAAf,CAA3C,EAEA,GAAIA,GAAG,CAACK,KAAD,CAAH,CAAWP,UAAX,EAAuBC,cAAvB,CAAJ,CACI,MAAOC,CAAAA,GAAG,CAACK,KAAD,CAAH,CAAWP,UAAX,EAAuBC,cAAvB,CAAP,CACJ,GAAIkC,MAAM,CAACC,IAAP,CAAYlC,GAAG,CAACK,KAAD,CAAH,CAAWP,UAAX,CAAZ,EAAoCqC,MAApC,GAA+C,CAAnD,CACInC,GAAG,CAACoC,MAAJ,CAAW/B,KAAX,CAAkB,CAAlB,EACJ,MAAOL,CAAAA,GAAP,CACH,C,gDAYWH,K,CAAOC,U,CAAYC,c,CAAe,CAE1C,GAAIF,KAAK,CAACU,MAAN,CAAaC,KAAb,GAAuB,EAAvB,EAA6B,KAAK6B,cAAL,CAAoB,KAAKpC,KAAL,CAAWC,OAA/B,CAAuCJ,UAAvC,CAAjC,CAAsF,CAClF,GAAIO,CAAAA,KAAK,CAAG,KAAKiC,kBAAL,CAAwB,KAAKrC,KAAL,CAAWC,OAAnC,CAA4CJ,UAA5C,CAAZ,CACA,KAAKa,QAAL,CAAc,CAACD,WAAW,CAAG,CAAf,CAAkBI,QAAQ,CAAG,IAA7B,CAAmCG,kBAAkB,CAAG,KAAxD,CAA+Df,OAAO,CAAG,KAAKqC,aAAL,CAAmBlC,KAAnB,CAA0BP,UAA1B,CAAsCC,cAAtC,CAAzE,CAAd,CAA+I,UAAY,CACvJ,KAAKsB,eAAL,CAAqB,KAAKpB,KAAL,CAAWqB,MAAhC,CAAwC,KAAKrB,KAAL,CAAWW,QAAnD,EACH,CAFD,EAGH,CALD,IAOK,IAAIf,KAAK,CAACU,MAAN,CAAaC,KAAb,GAAuB,EAAvB,EAA6B,CAAE,KAAK6B,cAAL,CAAoB,KAAKpC,KAAL,CAAWC,OAA/B,CAAwCJ,UAAxC,CAAnC,CAAwF,CACzF,KAAKa,QAAL,CAAc,CAACD,WAAW,CAAG,CAAf,CAAkBI,QAAQ,CAAG,IAA7B,CAAmCG,kBAAkB,CAAG,IAAxD,CACTf,OAAO,CAAE,KAAKD,KAAL,CAAWC,OAAX,CAAmBsC,MAAnB,CAA0B,oBAAG1C,UAAH,oBAAkBC,cAAlB,CAAoCF,KAAK,CAACU,MAAN,CAAaC,KAAjD,GAA1B,CADA,CAAd,CACqG,UAAY,CAC7GW,OAAO,CAACC,GAAR,CAAY,mBAAqB,KAAKnB,KAAL,CAAWC,OAA5C,EACA,KAAKmB,eAAL,CAAqB,KAAKpB,KAAL,CAAWqB,MAAhC,CAAwC,KAAKrB,KAAL,CAAWW,QAAnD,EACH,CAJD,EAMH,CAPI,IASA,IAAIf,KAAK,CAACU,MAAN,CAAaC,KAAb,GAAuB,EAAvB,EAA8B,KAAK6B,cAAL,CAAoB,KAAKpC,KAAL,CAAWC,OAA/B,CAAwCJ,UAAxC,CAAlC,CAAuF,CACxF,KAAKa,QAAL,CAAc,CAACD,WAAW,CAAG,CAAf,CAAkBI,QAAQ,CAAG,IAA7B,CAAmCG,kBAAkB,CAAG,IAAxD,CACVf,OAAO,CAAG,KAAKN,qCAAL,CAA2CC,KAA3C,CAAkDC,UAAlD,CAA8DC,cAA9D,CADA,CAAd,CAC8F,UAAW,CACjG,KAAKsB,eAAL,CAAqB,KAAKpB,KAAL,CAAWqB,MAAhC,CAAwC,KAAKrB,KAAL,CAAWW,QAAnD,EACP,CAHD,EAKH,CANI,IAOA,CACDO,OAAO,CAACC,GAAR,CAAY,UAAZ,EAEH,CACJ,C,yCAEQ,iBACL,mBAAQ,aAAK,SAAS,CAAC,KAAf,wBACP,iBAAU,WAAW,CAAE,IAAvB,CAA4B,MAAM,CAAG,gBAAAvB,KAAK,CAAI,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,KAAxB,CAA+B,IAA/B,EAAqC,CAApF,EADO,cAEP,iBAAU,WAAW,CAAE,WAAvB,CAAmC,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,MAAxB,CAAgC,IAAhC,EAAsC,CAA3F,EAFO,cAGP,iBAAU,WAAW,CAAE,SAAvB,CAAiC,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,aAAxB,CAAuC,IAAvC,EAA6C,CAAhG,EAHO,cAIP,iBAAU,WAAW,CAAE,uBAAvB,CAA+C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,WAAxB,CAAqC,KAArC,EAA4C,CAA7G,EAJO,cAKP,iBAAU,WAAW,CAAE,sBAAvB,CAA8C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,WAAxB,CAAqC,KAArC,EAA4C,CAA5G,EALO,cAMP,iBAAU,WAAW,CAAE,wBAAvB,CAAgD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,WAAxB,CAAqC,KAArC,EAA4C,CAA9G,EANO,cAOP,iBAAU,WAAW,CAAE,uBAAvB,CAA+C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,WAAxB,CAAqC,KAArC,EAA4C,CAA7G,EAPO,cAQP,iBAAU,WAAW,CAAE,uBAAvB,CAA+C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAAxH,EARO,cASP,iBAAU,WAAW,CAAE,sBAAvB,CAA8C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAAvH,EATO,cAUP,iBAAU,WAAW,CAAE,+BAAvB,CAAuD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,wBAAxB,CAAkD,KAAlD,EAAyD,CAAlI,EAVO,cAWP,iBAAU,WAAW,CAAE,8BAAvB,CAAsD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,wBAAxB,CAAkD,KAAlD,EAAyD,CAAjI,EAXO,cAYP,iBAAU,WAAW,CAAE,0BAAvB,CAAkD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,kBAAxB,CAA4C,KAA5C,EAAmD,CAAvH,EAZO,cAaP,iBAAU,WAAW,CAAE,yBAAvB,CAAiD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,kBAAxB,CAA4C,KAA5C,EAAmD,CAAtH,EAbO,cAcP,iBAAU,WAAW,CAAE,8BAAvB,CAAsD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAA/H,EAdO,cAeP,iBAAU,WAAW,CAAE,6BAAvB,CAAqD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAA9H,EAfO,cAgBP,iBAAU,WAAW,CAAE,8BAAvB,CAAsD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAA/H,EAhBO,cAiBP,iBAAU,WAAW,CAAE,6BAAvB,CAAqD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAA9H,EAjBO,cAkBP,iBAAU,WAAW,CAAE,aAAvB,CAAqC,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAAC4C,WAAL,CAAiB5C,KAAjB,CAAwB,aAAxB,CAAuC,IAAvC,EAA6C,CAApG,EAlBO,GAAR,CAoBJ,C,uCAEO,iBACJ,mBAAQ,oCACR,mCACI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACwB,eAAL,CAAqB,KAArB,CAA4B,MAAI,CAACpB,KAAL,CAAWW,QAAvC,CAAL,EAAb,oBADJ,cAEI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,MAArB,CAA6B,MAAI,CAACpB,KAAL,CAAWW,QAAxC,CAAL,EAAb,uBAFJ,cAGI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,WAArB,CAAkC,MAAI,CAACpB,KAAL,CAAWW,QAA7C,CAAL,EAAb,sBAHJ,cAII,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,WAArB,CAAkC,MAAI,CAACpB,KAAL,CAAWW,QAA7C,CAAL,EAAb,uBAJJ,cAKI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,aAArB,CAAoC,MAAI,CAACpB,KAAL,CAAWW,QAA/C,CAAL,EAAb,qBALJ,cAMI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,sBAArB,CAA6C,MAAI,CAACpB,KAAL,CAAWW,QAAxD,CAAL,EAAb,sBANJ,cAOI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,wBAArB,CAA+C,MAAI,CAACpB,KAAL,CAAWW,QAA1D,CAAL,EAAb,wBAPJ,cAQI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,kBAArB,CAAyC,MAAI,CAACpB,KAAL,CAAWW,QAApD,CAAL,EAAb,yBARJ,cASI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,sBAArB,CAA6C,MAAI,CAACpB,KAAL,CAAWW,QAAxD,CAAL,EAAb,iCATJ,cAUI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,sBAArB,CAA6C,MAAI,CAACpB,KAAL,CAAWW,QAAxD,CAAL,EAAb,iCAVJ,cAWI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACS,eAAL,CAAqB,aAArB,CAAoC,MAAI,CAACpB,KAAL,CAAWW,QAA/C,CAAL,EAAb,yBAXJ,GADQ,EAAR,CAeH,C,0CAEQ8B,Y,CAAa,CACrB,mBAEA,uBAEQA,YAAY,CAACC,GAAb,CACI,SAAAC,OAAO,qBACH,mCACI,oBAAKA,OAAO,CAACC,GAAb,EADJ,cAEI,oBAAKD,OAAO,CAACE,IAAb,EAFJ,cAGI,oBAAKF,OAAO,CAACG,KAAR,CAAcC,GAAnB,EAHJ,cAII,oBAAKJ,OAAO,CAACG,KAAR,CAAcE,GAAnB,EAJJ,cAKI,oBAAKL,OAAO,CAACM,GAAR,CAAYC,OAAjB,EALJ,cAMI,oBAAKP,OAAO,CAACQ,WAAR,CAAoBC,QAAzB,EANJ,cAOI,oBAAKT,OAAO,CAACQ,WAAR,CAAoBE,UAAzB,EAPJ,cAQI,oBAAKV,OAAO,CAACQ,WAAR,CAAoBG,IAAzB,EARJ,cASI,oBAAKX,OAAO,CAACQ,WAAR,CAAoBI,QAAzB,EATJ,cAUI,oBAAKZ,OAAO,CAACQ,WAAR,CAAoBK,QAAzB,EAVJ,cAWI,oBAAKb,OAAO,CAACA,OAAR,CAAgB,CAAhB,EAAmBc,WAAxB,EAXJ,GAASd,OAAO,CAACC,GAAjB,CADG,EADX,CAFR,EAFA,CAuBA,C,uCAMS,CACL1B,OAAO,CAACC,GAAR,CAAY,cAAZ,EAEA,GAAMuC,CAAAA,UAAU,cAAG,KAAC,UAAD,EAAY,YAAY,CAAI,KAAK1D,KAAL,CAAWc,YAAvC,CAAqD,UAAU,CAAI,KAAKd,KAAL,CAAWW,QAAX,CAAoBuB,MAAvF,CAA+F,QAAQ,CAAE,KAAK1B,QAAL,CAAcmD,IAAd,EAAzG,EAAnB,CACA,GAAMC,CAAAA,eAAe,CAAG,KAAK5D,KAAL,CAAWS,WAAX,CAAyB,KAAKT,KAAL,CAAWc,YAA5D,CACA,GAAM+C,CAAAA,gBAAgB,CAAGD,eAAe,CAAG,KAAK5D,KAAL,CAAWc,YAAtD,CACA,GAAMgD,CAAAA,eAAe,CAAG,KAAK9D,KAAL,CAAWW,QAAX,CAAoBoD,KAApB,CAA0BF,gBAA1B,CAA4CD,eAA5C,CAAxB,CAEA,GAAII,CAAAA,SAAS,CAAE,CAAC,KAAK/D,OAAL,EAAD,CAAiByD,UAAjB,CAAf,CAEA,GAAI,KAAK1D,KAAL,CAAWW,QAAf,CACIqD,SAAS,CAACC,IAAV,cAAe,eAAO,SAAS,CAAC,OAAjB,WACV,KAAKC,MAAL,EADU,CAEV,KAAKC,QAAL,CAAcL,eAAd,CAFU,GAAf,EAKJ,mBACI,YAAK,SAAS,CAAC,WAAf,UACEE,SADF,EADJ,CAMH,C,kCA1M8B1E,S,EA4MnC,cAAeG,CAAAA,oBAAf","sourcesContent":["import React, { Component } from 'react'\nimport WeatherService from '../service/WeatherService';\nimport Pagination from './Pagination';\n\nclass WeatherListComponent extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            weathers: [],\n            isAscending: true,\n            filters: [],\n            isFilter : false,\n            currentPage : 1,\n            itemsPerPage : 1000,\n            loading : false,\n            isAdditionalFilter : false,\n            pageNumbers : []\n        }\n    }\n\n    componentDidMount() {\n        console.log(\"som v componentDidMOunt\")\n        this.refreshWeathers();\n    }\n\n    refreshWeathers(sortBy, weathers) {\n        WeatherService.retrieveAllWeathers(sortBy, this.state.isAscending, this.state.filters, this.state.isFilter, this.state.isAdditionalFilter, weathers)\n            .then(\n                response => {\n                    this.setState({ weathers: response.data })\n                }\n            ).then( () => {if (sortBy) this.setState({isAscending : !this.state.isAscending})}\n            ).then( () => {if (typeof this.state.filters !== 'undefined' && this.state.pageNumbers.filters === 0) this.setState({isFilter : false})})\n    }\n\n    keyExistsInArr(arr, key){\n        let exists = false\n        console.log(\"arr inside keyExists: \" + JSON.stringify(arr))\n\n        arr?.some(item => {\n            if(item.hasOwnProperty([key])) {\n                exists = true;\n                return true\n            }\n            else return false\n        })\n        return exists\n    }\n\n    findIndexInFilters(arr, key){\n        let indexOfKey = 0\n        arr?.some((filterName, index, filters) => {\n            if(filterName.hasOwnProperty([key])){ \n                indexOfKey = index\n                return indexOfKey\n            }\n            else return false\n        })\n        return indexOfKey\n    }\n\n    changeFilters(index, filterName, filterOperator) {\n        let arr = this.state.filters\n        console.log(\"arr inside changefilters: \" + JSON.stringify(arr))\n\n        if (arr[index][filterName][filterOperator])\n            delete arr[index][filterName][filterOperator]  \n        if (Object.keys(arr[index][filterName]).length === 0)\n            arr.splice(index, 1)\n        return arr\n    }\n\n    addFilterOperatorToExistingFilterName = (event, filterName, filterOperator) => {\n        const arr = this.state.filters\n        arr.forEach((item, index, filters) => {\n            if (item.hasOwnProperty([filterName])){\n                filters[index][filterName][filterOperator] = event.target.value\n            }\n        })\n        return arr\n    }\n\n    onBlurEvent(event, filterName, filterOperator){\n\n        if (event.target.value === \"\" && this.keyExistsInArr(this.state.filters,filterName))  {\n            var index = this.findIndexInFilters(this.state.filters, filterName)\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : false, filters : this.changeFilters(index, filterName, filterOperator)}, function () {\n                this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n        }\n\n        else if (event.target.value !== \"\" && !(this.keyExistsInArr(this.state.filters, filterName))){\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : true,\n                 filters: this.state.filters.concat([{[filterName]: {[filterOperator] : event.target.value}}])}, function () {\n                console.log(\"filters inside: \" + this.state.filters)\n                this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n\n        }\n\n        else if (event.target.value !== \"\" && (this.keyExistsInArr(this.state.filters, filterName))){\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : true, \n                filters : this.addFilterOperatorToExistingFilterName(event, filterName, filterOperator)}, function() {\n                    this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n           \n        }\n        else {\n            console.log(\"inside 4\")\n\n        }\n    }\n\n   filters() {\n        return (<div className=\"row\">\n        {<textarea placeholder= \"Id\" onBlur= {event => {this.onBlurEvent(event, \"_id\", \"eq\")}}></textarea>}\n        {<textarea placeholder= \"City name\" onBlur= {event =>{this.onBlurEvent(event, \"name\", \"eq\")}}></textarea>}\n        {<textarea placeholder= \"Country\" onBlur= {event =>{this.onBlurEvent(event, \"sys.country\", \"eq\")}}></textarea>}\n        {<textarea placeholder= \"Latitude smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"coord.lat\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Latitude bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"coord.lat\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Longitude smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"coord.lon\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Longitude bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"coord.lon\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Humidity smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.humidity\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Humidity bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.humidity\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Feel temperature smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.feels_like\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Feel temperature bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.feels_like\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature max smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp_max\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature max bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp_max\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature min smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp_min\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature min bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp_min\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Description\" onBlur= {event =>{this.onBlurEvent(event, \"description\", \"eq\")}}></textarea>}\n    </div>)\n   }\n\n   header(){\n       return (<thead>\n       <tr>\n           <th onClick={() =>this.refreshWeathers(\"_id\", this.state.weathers) }>cityId</th>\n           <th onClick={() =>this.refreshWeathers(\"name\", this.state.weathers) }>city Name</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lat\", this.state.weathers) }>latitude</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lon\", this.state.weathers) }>longitude</th>\n           <th onClick={() =>this.refreshWeathers(\"sys.country\", this.state.weathers) }>country</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.humidity\", this.state.weathers) }>humidity</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.feels_like\", this.state.weathers) }>feels like</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp\", this.state.weathers) }>temperature</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_max\", this.state.weathers) }>maximum temperature</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_min\", this.state.weathers) }>minimal temperature</th>\n           <th onClick={() =>this.refreshWeathers(\"description\", this.state.weathers) }>description</th>                                \n       </tr>\n   </thead>)\n   }\n\n   mainBody(currentPosts){\n    return (\n\n    <tbody>\n        {\n            currentPosts.map(\n                weather =>\n                    <tr key={weather._id}>\n                        <td>{weather._id}</td>\n                        <td>{weather.name}</td>\n                        <td>{weather.coord.lat}</td>\n                        <td>{weather.coord.lon}</td>\n                        <td>{weather.sys.country}</td>\n                        <td>{weather.weatherMain.humidity}</td>\n                        <td>{weather.weatherMain.feels_like}</td>\n                        <td>{weather.weatherMain.temp}</td>\n                        <td>{weather.weatherMain.temp_max}</td>\n                        <td>{weather.weatherMain.temp_min}</td>\n                        <td>{weather.weather[0].description}</td>\n                    </tr>\n            )\n        }\n        </tbody>\n    )\n   }\n\n    paginate = (currentPage) => {\n       this.setState({currentPage : currentPage})\n    }\n\n    render() {\n        console.log(\"som v render\")\n\n        const pagination = <Pagination itemsPerPage = {this.state.itemsPerPage} totalItems = {this.state.weathers.length} paginate={this.paginate.bind()}/>\n        const indexOfLastPost = this.state.currentPage * this.state.itemsPerPage;\n        const indexOfFirstPost = indexOfLastPost - this.state.itemsPerPage;\n        const currentWeathers = this.state.weathers.slice(indexOfFirstPost, indexOfLastPost);\n\n        let container= [this.filters(), pagination]\n\n        if (this.state.weathers)\n            container.push(<table className=\"table\">\n                {this.header()}\n                {this.mainBody(currentWeathers)}\n            </table>)\n\n        return (\n            <div className=\"container\">\n             {container}\n            </div>\n        )\n         \n    }\n}\nexport default WeatherListComponent\n"]},"metadata":{},"sourceType":"module"}