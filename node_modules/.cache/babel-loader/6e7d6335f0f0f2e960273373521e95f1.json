{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/component/WeatherListComponent.js\";\nimport React, { Component } from 'react';\nimport WeatherService from '../service/WeatherService';\nimport Pagination from './Pagination';\nimport { Multiselect } from 'multiselect-react-dropdown';\n\nclass WeatherListComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addFilterOperatorToExistingFilterName = (event, filterName, filterOperator) => {\n      const arr = this.state.filters;\n      arr.forEach((item, index, filters) => {\n        if (item.hasOwnProperty([filterName])) {\n          filters[index][filterName][filterOperator] = event;\n        }\n      });\n      return arr;\n    };\n\n    this.makeArrayFromCountriesMultiselect = countries => {\n      // var ret = ''\n      // console.log(\"countries in func: \" + JSON.stringify(countries))\n      // countries.forEach(item => {ret.push(item.name)})\n      // console.log(\"ret countries: \" + ret)\n      // return ret\n      var selectedCountriesIntoString = (prevVal, currVal, idx) => {\n        return idx === 0 ? currVal.name : prevVal + \", \" + currVal.name;\n      };\n\n      return countries.reduce(selectedCountriesIntoString, ''); // var weaterDescriptionReduce = (prevVal, currVal, idx) => {\n      //     return idx === 0 ? currVal.description : prevVal + \", \" + currVal.description;\n      // }\n      // return weather.weather.reduce(weaterDescriptionReduce, '')\n    };\n\n    this.getWeatherDescription = weather => {\n      var weaterDescriptionReduce = (prevVal, currVal, idx) => {\n        return idx === 0 ? currVal.description : prevVal + \", \" + currVal.description;\n      };\n\n      return weather.weather.reduce(weaterDescriptionReduce, '');\n    };\n\n    this.paginate = currentPage => {\n      this.setState({\n        currentPage: currentPage\n      });\n    };\n\n    this.state = {\n      weathers: [],\n      isAscending: true,\n      filters: [],\n      isFilter: false,\n      currentPage: 1,\n      itemsPerPage: 1000,\n      loading: false,\n      isAdditionalFilter: false,\n      pageNumbers: [],\n      options: [{\n        'name': 'IR'\n      }]\n    };\n  }\n\n  async componentDidMount() {\n    console.log(\"som v componentDidMOunt\");\n    const countries = await WeatherService.retrieveAllCountries(); // console.log(\"countries: \" + JSON.stringify(countries))\n\n    this.setState({\n      options: countries.data\n    });\n    this.refreshWeathers(); // console.log(\"options: \" + (this.state.options))\n  }\n\n  refreshWeathers(sortBy, weathers) {\n    WeatherService.retrieveAllWeathers(sortBy, this.state.isAscending, this.state.filters, this.state.isFilter, this.state.isAdditionalFilter, weathers).then(response => {\n      this.setState({\n        weathers: response.data\n      });\n    }).then(() => {\n      if (sortBy) this.setState({\n        isAscending: !this.state.isAscending\n      });\n    }).then(() => {\n      if (typeof this.state.filters !== 'undefined' && this.state.pageNumbers.filters === 0) this.setState({\n        isFilter: false\n      });\n    });\n  }\n\n  keyExistsInArr(arr, key) {\n    let exists = false;\n    console.log(\"arr inside keyExists: \" + JSON.stringify(arr));\n\n    if (!Array.isArray(key)) {\n      arr === null || arr === void 0 ? void 0 : arr.some(item => {\n        if (item.hasOwnProperty([key])) {\n          exists = true;\n          return true;\n        } else return false;\n      });\n    } else {\n      arr === null || arr === void 0 ? void 0 : arr.some(item => {\n        if (item.includes([key])) {\n          exists = true;\n          return true;\n        } else return false;\n      });\n    }\n\n    return exists;\n  }\n\n  findIndexInFilters(arr, key) {\n    let indexOfKey = 0;\n    arr === null || arr === void 0 ? void 0 : arr.some((filterName, index, filters) => {\n      if (filterName.hasOwnProperty([key])) {\n        indexOfKey = index;\n        return indexOfKey;\n      } else return false;\n    });\n    return indexOfKey;\n  }\n\n  changeFilters(index, filterName, filterOperator) {\n    let arr = this.state.filters;\n    console.log(\"arr inside changefilters: \" + JSON.stringify(arr));\n    if (arr[index][filterName][filterOperator]) delete arr[index][filterName][filterOperator];\n    if (Object.keys(arr[index][filterName]).length === 0) arr.splice(index, 1);\n    return arr;\n  }\n\n  onBlurEvent(event, filterName, filterOperator) {\n    console.log(\"event: \" + JSON.stringify(event));\n    console.log(\"filters: \" + JSON.stringify(this.state.filters));\n\n    if (event === \"\" && this.keyExistsInArr(this.state.filters, filterName)) {\n      var index = this.findIndexInFilters(this.state.filters, filterName);\n      this.setState({\n        currentPage: 1,\n        isFilter: true,\n        isAdditionalFilter: false,\n        filters: this.changeFilters(index, filterName, filterOperator)\n      }, function () {\n        this.refreshWeathers(this.state.sortBy, this.state.weathers);\n      });\n    } else if (event !== \"\" && !this.keyExistsInArr(this.state.filters, filterName)) {\n      this.setState({\n        currentPage: 1,\n        isFilter: true,\n        isAdditionalFilter: true,\n        filters: this.state.filters.concat([{\n          [filterName]: {\n            [filterOperator]: event\n          }\n        }])\n      }, function () {\n        console.log(\"filters inside: \" + this.state.filters);\n        this.refreshWeathers(this.state.sortBy, this.state.weathers);\n      });\n    } else if (event !== \"\" && this.keyExistsInArr(this.state.filters, filterName)) {\n      console.log(\"sys.country: \" + JSON.stringify(this.state.filters[\"sys.country\"]));\n      const isAdditionalFilterWithContains = this.state.filters[\"sys.country\"][\"in\"].includes(\",\") ? false : true;\n      this.setState({\n        currentPage: 1,\n        isFilter: true,\n        isAdditionalFilter: isAdditionalFilterWithContains,\n        filters: this.addFilterOperatorToExistingFilterName(event, filterName, filterOperator)\n      }, function () {\n        this.refreshWeathers(this.state.sortBy, this.state.weathers);\n      });\n    } else {\n      console.log(\"inside 4\");\n    }\n  }\n\n  filters() {\n    //    console.log(\"coutnries: \" + JSON.stringify(this.state.options))\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Id\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"_id\", \"eq\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"City   name\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"name\", \"eq\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(Multiselect, {\n        options: this.state.options,\n        displayValue: \"name\",\n        onSelect: event => {\n          this.onBlurEvent(this.makeArrayFromCountriesMultiselect(event), \"sys.country\", \"in\");\n        },\n        onRemove: event => {\n          this.onBlurEvent(this.makeArrayFromCountriesMultiselect(event), \"sys.country\", \"in\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Country\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"sys.country\", \"eq\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Latitude smaller than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"coord.lat\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Latitude bigger than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"coord.lat\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Longitude smaller than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"coord.lon\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Longitude bigger than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"coord.lon\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Humidity smaller than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.humidity\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Humidity bigger than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.humidity\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Feel temperature smaller than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.feels_like\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Feel temperature bigger than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.feels_like\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Temperature smaller than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.temp\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Temperature bigger than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.temp\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Temperature max smaller than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.temp_max\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Temperature max bigger than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.temp_max\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Temperature min smaller than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.temp_min\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Temperature min bigger than\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"weatherMain.temp_min\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Description\",\n        onBlur: event => {\n          this.onBlurEvent(event.target.value, \"description\", \"eq\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }, this);\n  }\n\n  header() {\n    return /*#__PURE__*/_jsxDEV(\"thead\", {\n      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"_id\", this.state.weathers),\n          children: \"cityId\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"name\", this.state.weathers),\n          children: \"city Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"coord.lat\", this.state.weathers),\n          children: \"latitude\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"coord.lon\", this.state.weathers),\n          children: \"longitude\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"sys.country\", this.state.weathers),\n          children: \"country\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"weatherMain.humidity\", this.state.weathers),\n          children: \"humidity\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"weatherMain.feels_like\", this.state.weathers),\n          children: \"feels like\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"weatherMain.temp\", this.state.weathers),\n          children: \"temperature\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"weatherMain.temp_max\", this.state.weathers),\n          children: \"maximum temperature\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"weatherMain.temp_min\", this.state.weathers),\n          children: \"minimal temperature\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          onClick: () => this.refreshWeathers(\"description\", this.state.weathers),\n          children: \"description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 16\n    }, this);\n  }\n\n  mainBody(currentPosts) {\n    return /*#__PURE__*/_jsxDEV(\"tbody\", {\n      children: currentPosts.map(weather => {\n        // console.log(JSON.stringify(weather.weather))\n        // let description = \n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather.coord.lat\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather.coord.lon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather.sys.country\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather.weatherMain.humidity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather.weatherMain.feels_like\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather.weatherMain.temp\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather.weatherMain.temp_max\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: weather.weatherMain.temp_min\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: this.getWeatherDescription(weather)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 25\n          }, this)]\n        }, weather._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 5\n    }, this);\n  }\n\n  render() {\n    console.log(\"som v render\");\n\n    const pagination = /*#__PURE__*/_jsxDEV(Pagination, {\n      itemsPerPage: this.state.itemsPerPage,\n      totalItems: this.state.weathers.length,\n      paginate: this.paginate.bind()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 28\n    }, this);\n\n    const indexOfLastPost = this.state.currentPage * this.state.itemsPerPage;\n    const indexOfFirstPost = indexOfLastPost - this.state.itemsPerPage;\n    const currentWeathers = this.state.weathers.slice(indexOfFirstPost, indexOfLastPost);\n    let container = [this.filters(), pagination];\n    if (this.state.weathers) container.push( /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: [this.header(), this.mainBody(currentWeathers)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 28\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: container\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default WeatherListComponent;","map":{"version":3,"sources":["/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/component/WeatherListComponent.js"],"names":["React","Component","WeatherService","Pagination","Multiselect","WeatherListComponent","constructor","props","addFilterOperatorToExistingFilterName","event","filterName","filterOperator","arr","state","filters","forEach","item","index","hasOwnProperty","makeArrayFromCountriesMultiselect","countries","selectedCountriesIntoString","prevVal","currVal","idx","name","reduce","getWeatherDescription","weather","weaterDescriptionReduce","description","paginate","currentPage","setState","weathers","isAscending","isFilter","itemsPerPage","loading","isAdditionalFilter","pageNumbers","options","componentDidMount","console","log","retrieveAllCountries","data","refreshWeathers","sortBy","retrieveAllWeathers","then","response","keyExistsInArr","key","exists","JSON","stringify","Array","isArray","some","includes","findIndexInFilters","indexOfKey","changeFilters","Object","keys","length","splice","onBlurEvent","concat","isAdditionalFilterWithContains","target","value","header","mainBody","currentPosts","map","_id","coord","lat","lon","sys","country","weatherMain","humidity","feels_like","temp","temp_max","temp_min","render","pagination","bind","indexOfLastPost","indexOfFirstPost","currentWeathers","slice","container","push"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport WeatherService from '../service/WeatherService';\nimport Pagination from './Pagination';\nimport { Multiselect } from 'multiselect-react-dropdown';\n\nclass WeatherListComponent extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            weathers: [],\n            isAscending: true,\n            filters: [],\n            isFilter : false,\n            currentPage : 1,\n            itemsPerPage : 1000,\n            loading : false,\n            isAdditionalFilter : false,\n            pageNumbers : [],\n            options : [{'name':'IR'}],\n        }\n    }\n\n    async componentDidMount() {\n        console.log(\"som v componentDidMOunt\")\n        const countries = await WeatherService.retrieveAllCountries()\n        // console.log(\"countries: \" + JSON.stringify(countries))\n        this.setState({options : countries.data})\n        \n        this.refreshWeathers();\n        // console.log(\"options: \" + (this.state.options))\n\n    }\n\n    refreshWeathers(sortBy, weathers) {\n\n        WeatherService.retrieveAllWeathers(sortBy, this.state.isAscending, this.state.filters, this.state.isFilter, this.state.isAdditionalFilter, weathers)\n            .then(\n                response => {\n                    this.setState({ weathers: response.data })\n                }\n            ).then( () => {if (sortBy) this.setState({isAscending : !this.state.isAscending})}\n            ).then( () => {if (typeof this.state.filters !== 'undefined' && this.state.pageNumbers.filters === 0) this.setState({isFilter : false})})\n    }\n\n    keyExistsInArr(arr, key){\n        let exists = false\n        console.log(\"arr inside keyExists: \" + JSON.stringify(arr))\n        if (!Array.isArray(key)){\n            arr?.some(item => {\n                if(item.hasOwnProperty([key])) {\n                    exists = true;\n                    return true\n                }\n                else return false\n            })\n        }\n        else{\n            arr?.some(item => {\n                if(item.includes([key])) {\n                    exists = true;\n                    return true\n                }\n                else return false\n            })\n        }\n        return exists\n    }\n\n    findIndexInFilters(arr, key){\n        let indexOfKey = 0\n        arr?.some((filterName, index, filters) => {\n            if(filterName.hasOwnProperty([key])){ \n                indexOfKey = index\n                return indexOfKey\n            }\n            else return false\n        })\n        return indexOfKey\n    }\n\n    changeFilters(index, filterName, filterOperator) {\n        let arr = this.state.filters\n        console.log(\"arr inside changefilters: \" + JSON.stringify(arr))\n\n        if (arr[index][filterName][filterOperator])\n            delete arr[index][filterName][filterOperator]  \n        if (Object.keys(arr[index][filterName]).length === 0)\n            arr.splice(index, 1)\n        return arr\n    }\n\n    addFilterOperatorToExistingFilterName = (event, filterName, filterOperator) => {\n        const arr = this.state.filters\n        arr.forEach((item, index, filters) => {\n            if (item.hasOwnProperty([filterName])){\n                filters[index][filterName][filterOperator] = event\n            }\n        })\n        return arr\n    }\n\n    onBlurEvent(event, filterName, filterOperator){\n        console.log(\"event: \" + JSON.stringify(event))\n        console.log(\"filters: \" + JSON.stringify(this.state.filters))\n\n        if (event === \"\" && this.keyExistsInArr(this.state.filters,filterName))  {\n            var index = this.findIndexInFilters(this.state.filters, filterName)\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : false, filters : this.changeFilters(index, filterName, filterOperator)}, function () {\n                this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n        }\n\n        else if (event !== \"\" && !(this.keyExistsInArr(this.state.filters, filterName))){\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : true,\n                 filters: this.state.filters.concat([{[filterName]: {[filterOperator] : event}}])}, function () {\n                console.log(\"filters inside: \" + this.state.filters)\n                this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n\n        }\n\n        else if (event !== \"\" && (this.keyExistsInArr(this.state.filters, filterName))){\n            console.log(\"sys.country: \" + JSON.stringify(this.state.filters[\"sys.country\"]))\n            const isAdditionalFilterWithContains = this.state.filters[\"sys.country\"][\"in\"].includes(\",\") ? false : true\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : isAdditionalFilterWithContains, \n                filters : this.addFilterOperatorToExistingFilterName(event, filterName, filterOperator)}, function() {\n                    this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n           \n        }\n        else {\n            console.log(\"inside 4\")\n\n        }\n    }\n\n    makeArrayFromCountriesMultiselect = (countries) => {\n        // var ret = ''\n        // console.log(\"countries in func: \" + JSON.stringify(countries))\n        // countries.forEach(item => {ret.push(item.name)})\n        // console.log(\"ret countries: \" + ret)\n        // return ret\n\n        var selectedCountriesIntoString = (prevVal, currVal, idx) => {\n            return idx === 0 ? currVal.name : prevVal +\", \" + currVal.name\n        }\n        return countries.reduce(selectedCountriesIntoString, '')\n        // var weaterDescriptionReduce = (prevVal, currVal, idx) => {\n        //     return idx === 0 ? currVal.description : prevVal + \", \" + currVal.description;\n        // }\n\n        // return weather.weather.reduce(weaterDescriptionReduce, '')\n    }\n   filters() {\n    //    console.log(\"coutnries: \" + JSON.stringify(this.state.options))\n        return (<div className=\"row\">\n        {<textarea placeholder= \"Id\" onBlur= {event => {this.onBlurEvent(event.target.value, \"_id\", \"eq\")}}></textarea>}\n        {<textarea placeholder= \"City   name\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"name\", \"eq\")}}></textarea>}\n        {<Multiselect options={this.state.options} displayValue='name'  onSelect={event =>{this.onBlurEvent(this.makeArrayFromCountriesMultiselect(event), \"sys.country\", \"in\")}} onRemove={event =>{this.onBlurEvent(this.makeArrayFromCountriesMultiselect(event), \"sys.country\", \"in\")}}/>}\n        {<textarea placeholder= \"Country\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"sys.country\", \"eq\")}}></textarea>}\n        {<textarea placeholder= \"Latitude smaller than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"coord.lat\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Latitude bigger than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"coord.lat\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Longitude smaller than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"coord.lon\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Longitude bigger than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"coord.lon\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Humidity smaller than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.humidity\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Humidity bigger than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.humidity\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Feel temperature smaller than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.feels_like\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Feel temperature bigger than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.feels_like\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature smaller than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.temp\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature bigger than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.temp\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature max smaller than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.temp_max\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature max bigger than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.temp_max\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature min smaller than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.temp_min\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature min bigger than\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"weatherMain.temp_min\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Description\" onBlur= {event =>{this.onBlurEvent(event.target.value, \"description\", \"eq\")}}></textarea>}\n    </div>)\n   }\n\n   header(){\n       return (<thead>\n       <tr>\n           <th onClick={() =>this.refreshWeathers(\"_id\", this.state.weathers) }>cityId</th>\n           <th onClick={() =>this.refreshWeathers(\"name\", this.state.weathers) }>city Name</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lat\", this.state.weathers) }>latitude</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lon\", this.state.weathers) }>longitude</th>\n           <th onClick={() =>this.refreshWeathers(\"sys.country\", this.state.weathers) }>country</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.humidity\", this.state.weathers) }>humidity</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.feels_like\", this.state.weathers) }>feels like</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp\", this.state.weathers) }>temperature</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_max\", this.state.weathers) }>maximum temperature</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_min\", this.state.weathers) }>minimal temperature</th>\n           <th onClick={() =>this.refreshWeathers(\"description\", this.state.weathers) }>description</th>                                \n       </tr>\n   </thead>)\n   }\n\n    getWeatherDescription = (weather) => {\n        var weaterDescriptionReduce = (prevVal, currVal, idx) => {\n            return idx === 0 ? currVal.description : prevVal + \", \" + currVal.description;\n        }\n\n        return weather.weather.reduce(weaterDescriptionReduce, '')\n    }\n\n\n\n   mainBody(currentPosts){\n    return (\n\n    <tbody>\n        {\n            currentPosts.map(\n                weather =>{\n                    // console.log(JSON.stringify(weather.weather))\n                // let description = \n                    return (<tr key={weather._id}>\n                        <td>{weather._id}</td>\n                        <td>{weather.name}</td>\n                        <td>{weather.coord.lat}</td>\n                        <td>{weather.coord.lon}</td>\n                        <td>{weather.sys.country}</td>\n                        <td>{weather.weatherMain.humidity}</td>\n                        <td>{weather.weatherMain.feels_like}</td>\n                        <td>{weather.weatherMain.temp}</td>\n                        <td>{weather.weatherMain.temp_max}</td>\n                        <td>{weather.weatherMain.temp_min}</td>\n                        <td>{this.getWeatherDescription(weather)}</td>\n                    </tr>)}\n            )\n        }\n        </tbody>\n    )\n   }\n\n    paginate = (currentPage) => {\n       this.setState({currentPage : currentPage})\n    }\n\n    render() {\n        console.log(\"som v render\")\n\n        const pagination = <Pagination itemsPerPage = {this.state.itemsPerPage} totalItems = {this.state.weathers.length} paginate={this.paginate.bind()}/>\n        const indexOfLastPost = this.state.currentPage * this.state.itemsPerPage;\n        const indexOfFirstPost = indexOfLastPost - this.state.itemsPerPage;\n        const currentWeathers = this.state.weathers.slice(indexOfFirstPost, indexOfLastPost);\n\n        let container= [this.filters(), pagination]\n\n        if (this.state.weathers)\n            container.push(<table className=\"table\">\n                {this.header()}\n                {this.mainBody(currentWeathers)}\n            </table>)\n\n        return (\n            <div className=\"container\">\n             {container}\n            </div>\n        )\n         \n    }\n}\nexport default WeatherListComponent\n"]},"metadata":{},"sourceType":"module"}