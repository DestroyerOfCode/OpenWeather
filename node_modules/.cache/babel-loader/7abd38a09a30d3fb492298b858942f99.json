{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/components/current/Filters.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Multiselect } from 'multiselect-react-dropdown';\nimport '../../styles/current/Filters.scss';\nimport i18n from 'i18next';\n\nfunction FiltersComponent(props) {\n  _s();\n\n  //TODO find out how to call setMethod in buildFilter function\n  const [filterKey, setFilterKey] = useState(\"\");\n  const [filtervalue, setFilterValue] = useState(\"\");\n  const [filterOperator, setFilterOperator] = useState(\"\");\n  useEffect(() => {\n    const timeOutId = setTimeout(() => props.onChangeMethod(filtervalue, filterKey, filterOperator), 500);\n    return () => clearTimeout(timeOutId);\n  }, [filterKey, filtervalue, filterOperator, props]);\n\n  var buildFilter = (filterValue, filterKey, filterOperator) => {\n    setFilterValue(filterValue);\n    setFilterKey(filterKey);\n    setFilterOperator(filterOperator);\n  };\n\n  const placeholder = (filters, filterOperator, filterKey, placeholderValue) => {\n    let ret = placeholderValue;\n    if (filters !== 'undefined' && filters.length > 0) filters.some(item => {\n      if (item.filterKey === filterKey) {\n        ret = item.filterKey[filterOperator];\n        return true;\n      }\n\n      return false;\n    });\n    return ret;\n  };\n\n  console.log(\"props.filters\");\n  console.log(props.filters);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"currentFiltersWrappes\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"eq\", \"name\", i18n.t(\"current.filters.cityName\")),\n      onChange: event => {\n        buildFilter(event.target.value, \"name\", \"eq\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"gte\", \"coord.lat\", i18n.t(\"current.filters.latitudeFrom\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lat\", \"gte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"lte\", \"coord.lat\", i18n.t(\"current.filters.latitudeTo\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lat\", \"lte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"gte\", \"coord.lon\", i18n.t(\"current.filters.longitudeFrom\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lon\", \"gte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"lte\", \"coord.lon\", i18n.t(\"current.filters.longitudeTo\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lon\", \"lte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"gte\", \"weatherMain.humidity\", i18n.t(\"current.filters.humidityFrom\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(event.target.value, \"weatherMain.humidity\", \"gte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"lte\", \"weatherMain.humidity\", i18n.t(\"current.filters.humidityTo\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(event.target.value, \"weatherMain.humidity\", \"lte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"gte\", \"weatherMain.feels_like\", i18n.t(\"current.filters.feelTemperatureFrom\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.feels_like\", \"gte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"lte\", \"weatherMain.feels_like\", i18n.t(\"current.filters.feelTemperatureTo\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.feels_like\", \"lte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"gte\", \"weatherMain.temp\", i18n.t(\"current.filters.temperatureFrom\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp\", \"gte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"lte\", \"weatherMain.temp\", i18n.t(\"current.filters.temperatureTo\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp\", \"lte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"gte\", \"weatherMain.temp_max\", i18n.t(\"current.filters.temperatureMaxFrom\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_max\", \"gte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"lte\", \"weatherMain.temp_max\", i18n.t(\"current.filters.temperatureMaxTo\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_max\", \"lte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"gte\", \"weatherMain.temp_min\", i18n.t(\"current.filters.temperatureMinFrom\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_min\", \"gte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: placeholder(props.filters, \"lte\", \"weatherMain.temp_min\", i18n.t(\"current.filters.temperatureMinTo\")),\n      onChange: event => {\n        if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_min\", \"lte\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Multiselect, {\n      placeholder: placeholder(props.filters, \"in\", \"weather.description\", i18n.t(\"current.filters.pickDescriptions\")),\n      options: props.descriptions,\n      displayValue: \"name\",\n      showCheckbox: true,\n      onSelect: event => {\n        buildFilter(makeStringFromDescriptions(event), \"weather.description\", \"in\");\n      },\n      onRemove: event => {\n        buildFilter(makeStringFromDescriptions(event), \"weather.description\", \"in\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(Multiselect, {\n      placeholder: placeholder(props.filters, \"in\", \"sys.country\", i18n.t(\"current.filters.pickCountries\")),\n      options: props.countries,\n      displayValue: \"name\",\n      onSelect: event => {\n        buildFilter(makeStringFromCountries(event), \"sys.country\", \"in\");\n      },\n      onRemove: event => {\n        buildFilter(makeStringFromCountries(event), \"sys.country\", \"in\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n} // In db values are in kelvin. The user can change it on the UI.\n// I must convert to same units\n\n\n_s(FiltersComponent, \"zZRYoqm3bb8s4MlYdjRloDPx4qQ=\");\n\n_c = FiltersComponent;\n\nconst calculateKelvins = (temperatureUnits, temperatureValue) => {\n  if (temperatureValue === \"\") return \"\";\n  if (temperatureUnits === 'celsius') return (parseFloat(temperatureValue) + 273.15).toString();\n  if (temperatureUnits === 'fahrenheit') return ((parseFloat(temperatureValue) + 459.67) * 5 / 9).toString();\n  return temperatureValue;\n};\n\nconst isNumber = item => {\n  var isNumber = !isNaN(item);\n  if (!isNumber) alert('You must pick a number in this field');\n  return isNumber;\n}; // this closure's purpose is to create strings to be sent to query params, as no \n// other way to send arrays exists\n\n\nconst makeStringFromDescriptions = items => {\n  var selectedItemsIntoString = (prevVal, currVal, idx) => {\n    return idx === 0 ? currVal.originalValue : prevVal + \",\" + currVal.originalValue;\n  };\n\n  return items.reduce(selectedItemsIntoString, '');\n};\n\nconst makeStringFromCountries = items => {\n  var selectedItemsIntoString = (prevVal, currVal, idx) => {\n    return idx === 0 ? currVal.name : prevVal + \",\" + currVal.name;\n  };\n\n  return items.reduce(selectedItemsIntoString, '');\n};\n\nexport default FiltersComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"FiltersComponent\");","map":{"version":3,"sources":["/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/components/current/Filters.js"],"names":["React","useState","useEffect","Multiselect","i18n","FiltersComponent","props","filterKey","setFilterKey","filtervalue","setFilterValue","filterOperator","setFilterOperator","timeOutId","setTimeout","onChangeMethod","clearTimeout","buildFilter","filterValue","placeholder","filters","placeholderValue","ret","length","some","item","console","log","t","event","target","value","isNumber","calculateKelvins","temperatureUnits","descriptions","makeStringFromDescriptions","countries","makeStringFromCountries","temperatureValue","parseFloat","toString","isNaN","alert","items","selectedItemsIntoString","prevVal","currVal","idx","originalValue","reduce","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from \"react\";\nimport { Multiselect } from 'multiselect-react-dropdown';\nimport '../../styles/current/Filters.scss'\nimport i18n from 'i18next'\n\nfunction FiltersComponent(props) {\n   \n    //TODO find out how to call setMethod in buildFilter function\n    const [filterKey, setFilterKey] = useState(\"\")\n    const [filtervalue, setFilterValue] = useState(\"\");\n    const [filterOperator, setFilterOperator] = useState(\"\");\n\n    useEffect(() => {\n        const timeOutId = setTimeout(() => props.onChangeMethod(filtervalue, filterKey, filterOperator), 500);\n        return () => clearTimeout(timeOutId);\n    }, [filterKey, filtervalue, filterOperator, props]);\n\n    var buildFilter = (filterValue, filterKey, filterOperator) => {\n        setFilterValue(filterValue); setFilterKey(filterKey); setFilterOperator(filterOperator)\n    }\n\n    const placeholder = (filters, filterOperator, filterKey, placeholderValue) => {\n        let ret = placeholderValue\n        if(filters !== 'undefined' && filters.length > 0)\n        filters.some((item) => {\n            if (item.filterKey === filterKey){\n                ret = item.filterKey[filterOperator]\n                return true\n            }\n            return false;\n        })\n        return ret\n    }\n    console.log(\"props.filters\")\n    console.log(props.filters)\n    return (\n        <form className=\"currentFiltersWrappes\">\n                {<input placeholder= {placeholder(props.filters, \"eq\",\"name\", i18n.t(\"current.filters.cityName\"))} onChange= {event =>{buildFilter(event.target.value, \"name\", \"eq\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"gte\",\"coord.lat\", i18n.t(\"current.filters.latitudeFrom\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lat\", \"gte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"lte\",\"coord.lat\", i18n.t(\"current.filters.latitudeTo\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lat\", \"lte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"gte\",\"coord.lon\", i18n.t(\"current.filters.longitudeFrom\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lon\", \"gte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"lte\",\"coord.lon\", i18n.t(\"current.filters.longitudeTo\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lon\", \"lte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"gte\",\"weatherMain.humidity\", i18n.t(\"current.filters.humidityFrom\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"weatherMain.humidity\", \"gte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"lte\",\"weatherMain.humidity\", i18n.t(\"current.filters.humidityTo\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"weatherMain.humidity\", \"lte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"gte\",\"weatherMain.feels_like\", i18n.t(\"current.filters.feelTemperatureFrom\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.feels_like\", \"gte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"lte\",\"weatherMain.feels_like\", i18n.t(\"current.filters.feelTemperatureTo\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.feels_like\", \"lte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"gte\",\"weatherMain.temp\", i18n.t(\"current.filters.temperatureFrom\") )} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp\", \"gte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"lte\",\"weatherMain.temp\", i18n.t(\"current.filters.temperatureTo\") )} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp\", \"lte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"gte\",\"weatherMain.temp_max\", i18n.t(\"current.filters.temperatureMaxFrom\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_max\", \"gte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"lte\",\"weatherMain.temp_max\", i18n.t(\"current.filters.temperatureMaxTo\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_max\", \"lte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"gte\",\"weatherMain.temp_min\", i18n.t(\"current.filters.temperatureMinFrom\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_min\", \"gte\")}}></input>}\n                {<input placeholder= {placeholder(props.filters, \"lte\",\"weatherMain.temp_min\", i18n.t(\"current.filters.temperatureMinTo\"))} onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_min\", \"lte\")}}></input>}\n                <br></br>\n                {<Multiselect placeholder={placeholder(props.filters, \"in\",\"weather.description\", i18n.t(\"current.filters.pickDescriptions\"))} options = {props.descriptions} displayValue='name' showCheckbox={true} onSelect={event =>{buildFilter(makeStringFromDescriptions(event), \"weather.description\", \"in\")}}\n                onRemove={event =>{buildFilter(makeStringFromDescriptions(event), \"weather.description\", \"in\")}}/>}\n                {<Multiselect placeholder={placeholder(props.filters, \"in\",\"sys.country\", i18n.t(\"current.filters.pickCountries\"))} options ={props.countries} displayValue='name'  onSelect={event =>{buildFilter(makeStringFromCountries(event), \"sys.country\", \"in\")}}\n                onRemove={event =>{buildFilter(makeStringFromCountries(event), \"sys.country\", \"in\")}}/>}\n        </form>\n        )\n}\n\n// In db values are in kelvin. The user can change it on the UI.\n// I must convert to same units\nconst calculateKelvins = (temperatureUnits, temperatureValue) => {\n    if(temperatureValue === \"\")\n        return \"\"\n    if (temperatureUnits === 'celsius')\n        return (parseFloat(temperatureValue) + 273.15).toString()\n    if (temperatureUnits === 'fahrenheit')\n        return (((parseFloat(temperatureValue) + 459.67) * 5) / 9).toString()\n    return temperatureValue\n}\n\n\nconst isNumber = (item) => {\n    var isNumber = !isNaN(item)\n    if (!isNumber) alert('You must pick a number in this field')\n    return isNumber\n}\n\n// this closure's purpose is to create strings to be sent to query params, as no \n// other way to send arrays exists\nconst makeStringFromDescriptions= (items) => {\n    var selectedItemsIntoString = (prevVal, currVal, idx) => {\n        return idx === 0 ? currVal.originalValue : prevVal + \",\" + currVal.originalValue\n    }\n    return items.reduce(selectedItemsIntoString, '')\n}\nconst makeStringFromCountries= (items) => {\n    var selectedItemsIntoString = (prevVal, currVal, idx) => {\n        return idx === 0 ? currVal.name : prevVal + \",\" + currVal.name\n    }\n    return items.reduce(selectedItemsIntoString, '')\n}\nexport default FiltersComponent"]},"metadata":{},"sourceType":"module"}