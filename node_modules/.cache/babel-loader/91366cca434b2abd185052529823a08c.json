{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/components/current/Filters.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Multiselect } from 'multiselect-react-dropdown';\nimport '../../styles/current/Filters.scss';\n\nfunction FiltersComponent(props) {\n  _s();\n\n  //TODO find out how to call setMethod in buildFilter function\n  const [filterKey, setFilterKey] = useState(\"\");\n  const [filtervalue, setFilterValue] = useState(\"\");\n  const [filterOperator, setFilterOperator] = useState(\"\");\n  useEffect(() => {\n    const timeOutId = setTimeout(() => props.onChangeMethod(filtervalue, filterKey, filterOperator), 500);\n    return () => clearTimeout(timeOutId);\n  }, [filterKey, filtervalue, filterOperator]);\n\n  var buildFilter = (filterValue, filterKey, filterOperator) => {\n    setFilterValue(filterValue);\n    setFilterKey(filterKey);\n    setFilterOperator(filterOperator);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"filters\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Temperature min\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"City name\",\n        onChange: event => {\n          buildFilter(event.target.value, \"name\", \"eq\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Latitude\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Latitude smaller than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lat\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Latitude bigger than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lat\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Longitude\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Longitude smaller than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lon\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Longitude bigger than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lon\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Humidity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Humidity smaller than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(event.target.value, \"weatherMain.humidity\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Humidity bigger than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(event.target.value, \"weatherMain.humidity\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Feel temperature\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Feel temperature smaller than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.feels_like\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Feel temperature bigger than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.feels_like\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Temperature smaller\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Temperature smaller than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Temperature bigger than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Temperature max\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Temperature max smaller than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_max\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Temperature max bigger than\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_max\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Temperature min\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_min\", \"lte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"\",\n        onChange: event => {\n          if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_min\", \"gte\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Multiselect, {\n        placeholder: \"Descriptions\",\n        options: props.descriptions,\n        displayValue: \"name\",\n        showCheckbox: true,\n        onSelect: event => {\n          buildFilter(makeStringFromSelectedItems(event), \"weather.description\", \"in\");\n        },\n        onRemove: event => {\n          buildFilter(makeStringFromSelectedItems(event), \"weather.description\", \"in\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 18\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Multiselect, {\n        placeholder: \"Countries\",\n        options: props.countries,\n        displayValue: \"name\",\n        onSelect: event => {\n          buildFilter(makeStringFromSelectedItems(event), \"sys.country\", \"in\");\n        },\n        onRemove: event => {\n          buildFilter(makeStringFromSelectedItems(event), \"sys.country\", \"in\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 18\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 9\n  }, this);\n} // In db values are in kelvin. The user can change it on the UI.\n// I must convert to same units\n\n\n_s(FiltersComponent, \"zZRYoqm3bb8s4MlYdjRloDPx4qQ=\");\n\n_c = FiltersComponent;\n\nconst calculateKelvins = (temperatureUnits, temperatureValue) => {\n  if (temperatureValue === \"\") return \"\";\n  console.log(\"temperatureUnits:\" + temperatureUnits + \" and temperatureValue:\" + temperatureValue);\n  if (temperatureUnits === 'celsius') return (parseFloat(temperatureValue) + 273.15).toString();\n  if (temperatureUnits === 'fahrenheit') return ((parseFloat(temperatureValue) + 459.67) * 5 / 9).toString();\n  return temperatureValue;\n};\n\nconst isNumber = item => {\n  console.log(\"typeof: \" + typeof item);\n  console.log(\"isNan: \" + !isNaN(item));\n  var isNumber = !isNaN(item);\n  if (!isNumber) alert('You must pick a number in this field');\n  return isNumber;\n}; // this closure's purpose is to create strings to be sent to query params, as no \n// other way to send arrays exists\n\n\nconst makeStringFromSelectedItems = items => {\n  var selectedItemsIntoString = (prevVal, currVal, idx) => {\n    return idx === 0 ? currVal.name : prevVal + \",\" + currVal.name;\n  };\n\n  return items.reduce(selectedItemsIntoString, '');\n};\n\nexport default FiltersComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"FiltersComponent\");","map":{"version":3,"sources":["/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/components/current/Filters.js"],"names":["React","useState","useEffect","Multiselect","FiltersComponent","props","filterKey","setFilterKey","filtervalue","setFilterValue","filterOperator","setFilterOperator","timeOutId","setTimeout","onChangeMethod","clearTimeout","buildFilter","filterValue","event","target","value","isNumber","calculateKelvins","temperatureUnits","descriptions","makeStringFromSelectedItems","countries","temperatureValue","console","log","parseFloat","toString","item","isNaN","alert","items","selectedItemsIntoString","prevVal","currVal","idx","name","reduce"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from \"react\";\nimport { Multiselect } from 'multiselect-react-dropdown';\nimport '../../styles/current/Filters.scss'\nfunction FiltersComponent(props) {\n   \n    //TODO find out how to call setMethod in buildFilter function\n    const [filterKey, setFilterKey] = useState(\"\")\n    const [filtervalue, setFilterValue] = useState(\"\");\n    const [filterOperator, setFilterOperator] = useState(\"\");\n\n    useEffect(() => {\n        const timeOutId = setTimeout(() => props.onChangeMethod(filtervalue, filterKey, filterOperator), 500);\n        return () => clearTimeout(timeOutId);\n    }, [filterKey, filtervalue, filterOperator]);\n\n    var buildFilter = (filterValue, filterKey, filterOperator) => {\n        setFilterValue(filterValue); setFilterKey(filterKey); setFilterOperator(filterOperator)\n    }\n\n    return (\n        <div className=\"filters\">\n            <div>\n                <p>Temperature min</p>\n                {<input placeholder= \"City name\" onChange= {event =>{buildFilter(event.target.value, \"name\", \"eq\")}}></input>}\n            </div>\n            <div>\n                <p>Latitude</p>\n                {<input placeholder= \"Latitude smaller than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lat\", \"lte\")}}></input>}\n                {<input placeholder= \"Latitude bigger than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lat\", \"gte\")}}></input>}\n            </div>\n            <div>\n                <p>Longitude</p>\n                {<input placeholder= \"Longitude smaller than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lon\", \"lte\")}}></input>}\n                {<input placeholder= \"Longitude bigger than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"coord.lon\", \"gte\")}}></input>}\n            </div>\n            <div>\n                <p>Humidity</p>\n                {<input placeholder= \"Humidity smaller than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"weatherMain.humidity\", \"lte\")}}></input>}\n                {<input placeholder= \"Humidity bigger than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(event.target.value, \"weatherMain.humidity\", \"gte\")}}></input>}\n            </div>\n            <div>\n                <p>Feel temperature</p>\n                {<input placeholder= \"Feel temperature smaller than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.feels_like\", \"lte\")}}></input>}\n                {<input placeholder= \"Feel temperature bigger than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.feels_like\", \"gte\")}}></input>}\n            </div>\n            <div>\n                <p>Temperature smaller</p>\n                {<input placeholder= \"Temperature smaller than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp\", \"lte\")}}></input>}\n                {<input placeholder= \"Temperature bigger than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp\", \"gte\")}}></input>}\n            </div>\n            <div>\n                <p>Temperature max</p>\n                {<input placeholder= \"Temperature max smaller than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_max\", \"lte\")}}></input>}\n                {<input placeholder= \"Temperature max bigger than\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_max\", \"gte\")}}></input>}\n            </div>\n            <div>\n                <p>Temperature min</p>\n                {<input placeholder= \"\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_min\", \"lte\")}}></input>}\n                {<input placeholder= \"\" onChange= {event =>{if (isNumber(event.target.value)) buildFilter(calculateKelvins(props.temperatureUnits, event.target.value), \"weatherMain.temp_min\", \"gte\")}}></input>}\n            </div>\n            <div>\n                {<Multiselect placeholder=\"Descriptions\" options = {props.descriptions} displayValue='name' showCheckbox={true} onSelect={event =>{buildFilter(makeStringFromSelectedItems(event), \"weather.description\", \"in\")}}\n                onRemove={event =>{buildFilter(makeStringFromSelectedItems(event), \"weather.description\", \"in\")}}/>}\n            </div>\n            <div>\n                {<Multiselect placeholder=\"Countries\" options ={props.countries} displayValue='name'  onSelect={event =>{buildFilter(makeStringFromSelectedItems(event), \"sys.country\", \"in\")}}\n                onRemove={event =>{buildFilter(makeStringFromSelectedItems(event), \"sys.country\", \"in\")}}/>}\n            </div>\n        </div>)\n}\n\n// In db values are in kelvin. The user can change it on the UI.\n// I must convert to same units\nconst calculateKelvins = (temperatureUnits, temperatureValue) => {\n    if(temperatureValue === \"\")\n        return \"\"\n    console.log(\"temperatureUnits:\" + temperatureUnits + \" and temperatureValue:\" + temperatureValue)\n    if (temperatureUnits === 'celsius')\n        return (parseFloat(temperatureValue) + 273.15).toString()\n    if (temperatureUnits === 'fahrenheit')\n        return (((parseFloat(temperatureValue) + 459.67) * 5) / 9).toString()\n    return temperatureValue\n}\n\nconst isNumber = (item) => {\n    console.log(\"typeof: \" + typeof item)\n    console.log(\"isNan: \" + !isNaN(item))\n    var isNumber = !isNaN(item)\n    if (!isNumber) alert('You must pick a number in this field')\n    return isNumber\n}\n\n// this closure's purpose is to create strings to be sent to query params, as no \n// other way to send arrays exists\nconst makeStringFromSelectedItems= (items) => {\n    var selectedItemsIntoString = (prevVal, currVal, idx) => {\n        return idx === 0 ? currVal.name : prevVal + \",\" + currVal.name\n    }\n    return items.reduce(selectedItemsIntoString, '')\n}\n\nexport default FiltersComponent"]},"metadata":{},"sourceType":"module"}