{"ast":null,"code":"import _regeneratorRuntime from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import WeatherCurrentService from'../../adapters/WeatherCurrentService';import Pagination from'../current/Pagination';import FiltersComponent from'./Filters';import{Link}from\"react-router-dom\";import{getWeatherDescription,convertTemperature}from'../../businessLogic/WeatherBusinessLogic';import'../../styles/common/Header.scss';import{nanoid}from\"nanoid\";import{connect}from'react-redux';import{createPost}from'../../actions/WeatherCurrentActions';import i18n from'i18next';var WeatherCurrent=/*#__PURE__*/function(_React$Component){_inherits(WeatherCurrent,_React$Component);var _super=_createSuper(WeatherCurrent);function WeatherCurrent(props){var _this;_classCallCheck(this,WeatherCurrent);console.log(props.temperature);_this=_super.call(this,props);_this.internationalizeDescriptions=function(descriptions){return descriptions.map(function(description){return{\"name\":i18n.t(\"common.description.\"+description.originalValue),\"id\":description.id,\"originalValue\":description.originalValue};});};_this.internationalizeCountries=function(descriptions){return descriptions.map(function(country){// console.log(country)\nreturn{\"countryName\":i18n.t(\"common.countryName.\"+country.originalCountryName),\"id\":country.code,\"originalCountryName\":country.originalCountryName};});};_this.addFilterOperatorToExistingFilterName=function(event,filterName,filterOperator){var arr=_this.state.filters;arr.forEach(function(item,index,filters){if(item.hasOwnProperty([filterName])){filters[index][filterName][filterOperator]=event;}});return arr;};_this.onChangeFilter=function(event,filterName,filterOperator){var index;if(event===\"\"&&_this.keyExistsInArr(_this.state.filters,filterName)){index=_this.findIndexInFilters(_this.state.filters,filterName);_this.setState({currentPage:1,isFilter:true,isAdditionalFilter:false,filters:_this.changeFilters(index,filterName,filterOperator)},function(){this.refreshWeathers(this.state.sortBy,this.state.weathers);});}else if(event!==\"\"&&!_this.keyExistsInArr(_this.state.filters,filterName)){_this.setState({currentPage:1,isFilter:true,isAdditionalFilter:true,filters:_this.state.filters.concat([_defineProperty({},filterName,_defineProperty({},filterOperator,event))])},function(){this.refreshWeathers(this.state.sortBy,this.state.weathers);});}else if(event!==\"\"&&_this.keyExistsInArr(_this.state.filters,filterName)){index=_this.findIndexInFilters(_this.state.filters,filterName);_this.setState({currentPage:1,isFilter:true,isAdditionalFilter:_this.isAdditionalFilterCheck(event,index,filterName,filterOperator),filters:_this.addFilterOperatorToExistingFilterName(event,filterName,filterOperator)},function(){this.refreshWeathers(this.state.sortBy,this.state.weathers);});}else{}};_this.createForecast=function(){return/*#__PURE__*/_jsx(Link,{to:\"/forecast\"});};_this.paginate=function(page){// if(currentPage !== 0 && currentPage <= lastPage)\n_this.setState({currentPage:page},function(){});};_this.getWeathersOnSpecificPage=function(){var indexOfLastPost=_this.state.currentPage*_this.state.itemsPerPage;var indexOfFirstPost=indexOfLastPost-_this.state.itemsPerPage;return _this.state.weathers.slice(indexOfFirstPost,indexOfLastPost);};_this.changeLanguage=function(language,i18n){i18n.changeLanguage(language);_this.setState({},function(){_this.setState({language:language});});};_this.state={weathers:[],isAscending:true,filters:[],isFilter:false,currentPage:1,itemsPerPage:1000,loading:false,isAdditionalFilter:false,pageNumbers:[],countries:[],descriptions:[],showPages:5,language:i18n.language,filterComponent:null,temperature:props.temperature};return _this;}//I added temperatureDropdownList, filterscomponent and header here because I do not want to rerender them\n//on every update. I cant use shouldComponentUpdate because they either are not components or are functional\n//meaning they are stateless\n_createClass(WeatherCurrent,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var countries,descriptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"componentDidMount\");console.log(this.state.temperature);_context.next=4;return WeatherCurrentService.retrieveAllCountries();case 4:countries=_context.sent;_context.next=7;return WeatherCurrentService.retrieveAllDescriptions();case 7:descriptions=_context.sent;this.setState({countries:countries.data,descriptions:descriptions.data,filterComponent:/*#__PURE__*/_jsx(FiltersComponent,{temperatureUnits:this.state.temperature.units,countries:this.internationalizeCountries(countries.data),descriptions:this.internationalizeDescriptions(descriptions.data),onChangeMethod:this.onChangeFilter},nanoid())},function(){this.refreshWeathers();});case 9:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()// shouldComponentUpdate(nextProps, nextState) {\n// console.log(\"this.state.filters\" + JSON.stringify(this.state.filters) + \" nextState.filters: \" + JSON.stringify(nextState.filters))\n// console.log(JSON.stringify(this.state.filters) === JSON.stringify(nextState.filters))\n// if (JSON.stringify(this.state.filters) === JSON.stringify(nextState.filters)) {\n// \n//   return false;\n// }\n// return true;\n//   }\n// componentDidUpdate(){\n//     this.setState({description = {this.internationalizeDescriptions}})\n// }\n},{key:\"refreshWeathers\",value:function refreshWeathers(sortBy,weathers){var _this2=this;WeatherCurrentService.retrieveAllWeathers(sortBy,this.state.isAscending,this.state.filters,this.state.isFilter,this.state.isAdditionalFilter,weathers).then(function(response){_this2.setState({weathers:response.data});}).then(function(){if(sortBy)_this2.setState({isAscending:!_this2.state.isAscending});}).then(function(){if(typeof _this2.state.filters!=='undefined'&&_this2.state.filters===0)_this2.setState({isFilter:false});});}},{key:\"keyExistsInArr\",value:function keyExistsInArr(arr,key){var exists=false;if(!Array.isArray(key)){arr===null||arr===void 0?void 0:arr.some(function(item){if(item.hasOwnProperty([key])){exists=true;return true;}else return false;});}//since countries and descriptions is a multicheckbox, they are arrays and it has multiple keys and must check not with equals\nelse{arr===null||arr===void 0?void 0:arr.some(function(item){if(item.includes([key])){exists=true;return true;}else return false;});}return exists;}},{key:\"findIndexInFilters\",value:function findIndexInFilters(arr,key){var indexOfKey=0;arr===null||arr===void 0?void 0:arr.some(function(filterName,index,filters){if(filterName.hasOwnProperty([key])){indexOfKey=index;return indexOfKey;}else return false;});return indexOfKey;}},{key:\"changeFilters\",value:function changeFilters(index,filterName,filterOperator){var arr=this.state.filters;if(arr[index][filterName][filterOperator])delete arr[index][filterName][filterOperator];if(Object.keys(arr[index][filterName]).length===0)arr.splice(index,1);return arr;}},{key:\"isAdditionalFilterCheck\",value:function isAdditionalFilterCheck(event,index,filterName,filterOperator){if(this.isNotAdditionalFilterWithContains(event)===false)return false;if(this.isSameFilterChanged(event,index,filterName,filterOperator)===false)return false;return true;}//if there are multiple countries and descriptions, backend must make a new query\n//since no additional filter is added, only value. I am unable to send query request\n//with an array element\n},{key:\"isNotAdditionalFilterWithContains\",value:function isNotAdditionalFilterWithContains(event){return event.includes(\",\")?false:true;}// this check is here for times when I change the same filter multiple\n// times in a row and the filter is same. If it is the same I cant filter\n// from memory because I could not load some weathers\n},{key:\"isSameFilterChanged\",value:function isSameFilterChanged(event,index,filterName,filterOperator){return filterName===this.state.filters[index][filterName];}},{key:\"header\",value:function header(){var _this3=this;return/*#__PURE__*/_jsx(\"thead\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"_id\",_this3.state.weathers);},children:i18n.t(\"current.header.cityId\")}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"name\",_this3.state.weathers);},children:i18n.t('current.header.cityName')}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"coord.lat\",_this3.state.weathers);},children:i18n.t(\"current.header.latitude\")}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"coord.lon\",_this3.state.weathers);},children:i18n.t(\"current.header.longitude\")}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"sys.countryName\",_this3.state.weathers);},children:i18n.t(\"current.header.country\")}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"weatherMain.humidity\",_this3.state.weathers);},children:i18n.t(\"current.header.humidity\")}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"weatherMain.feels_like\",_this3.state.weathers);},children:i18n.t(\"current.header.feelsLike\")}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"weatherMain.temp\",_this3.state.weathers);},children:i18n.t(\"current.header.temperature\")}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"weatherMain.temp_max\",_this3.state.weathers);},children:i18n.t(\"current.header.maximumTemperature\")}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"weatherMain.temp_min\",_this3.state.weathers);},children:i18n.t(\"current.header.minimalTemperature\")}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this3.refreshWeathers(\"weather.description\",_this3.state.weathers);},children:i18n.t(\"current.header.description\")})]})});}},{key:\"mainBody\",value:function mainBody(currentPosts,temperature){console.log(temperature.units);return/*#__PURE__*/_jsx(\"tbody\",{children:currentPosts.map(function(weather){var _convertTemperature,_convertTemperature2,_convertTemperature3,_convertTemperature4;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:weather._id}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(Link,{to:{pathname:\"/forecast\",state:{\"lat\":weather.coord.lat,\"lon\":weather.coord.lon}},children:weather.name})]}),/*#__PURE__*/_jsx(\"td\",{children:weather.coord.lat}),/*#__PURE__*/_jsx(\"td\",{children:weather.coord.lon}),/*#__PURE__*/_jsx(\"td\",{children:i18n.t(\"common.countryName.\".concat(weather.sys.countryName))}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.humidity}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat((_convertTemperature=convertTemperature(temperature.units,weather.weatherMain.feels_like))===null||_convertTemperature===void 0?void 0:_convertTemperature.toFixed(2)).concat(temperature.abbreviation)}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat((_convertTemperature2=convertTemperature(temperature.units,weather.weatherMain.temp))===null||_convertTemperature2===void 0?void 0:_convertTemperature2.toFixed(2)).concat(temperature.abbreviation)}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat((_convertTemperature3=convertTemperature(temperature.units,weather.weatherMain.temp_max))===null||_convertTemperature3===void 0?void 0:_convertTemperature3.toFixed(2)).concat(temperature.abbreviation)}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat((_convertTemperature4=convertTemperature(temperature.units,weather.weatherMain.temp_min))===null||_convertTemperature4===void 0?void 0:_convertTemperature4.toFixed(2)).concat(temperature.abbreviation)}),/*#__PURE__*/_jsx(\"td\",{children:getWeatherDescription(weather)})]},nanoid());})});}},{key:\"render\",value:function render(){console.log(\"som v render\");var currentWeathers=this.getWeathersOnSpecificPage();var descriptions=this.internationalizeDescriptions(this.state.descriptions);var countries=this.internationalizeCountries(this.state.countries);// let filters =     (\n// this.state.filterComponent)\nvar filters=/*#__PURE__*/_jsx(FiltersComponent,{temperatureUnits:this.props.temperature.units,countries:countries,descriptions:this.internationalizeDescriptions(descriptions),filters:this.state.filters,onChangeMethod:this.onChangeFilter,temperature:this.props.temperature},nanoid());var pagination=/*#__PURE__*/_jsx(Pagination,{currentPage:this.state.currentPage,showPages:this.state.showPages,itemsPerPage:this.state.itemsPerPage,totalItems:this.state.weathers.length,paginate:this.paginate},nanoid());// const temperatureDropdownListComponent = temperatureDropdownList( (units, abbreviation ) => {\n// this.setState({\"temperature\": {\"units\" : units, \"abbreviation\" : abbreviation}})\n// })\nvar container=[filters,pagination];if(this.state.weathers)container.push(/*#__PURE__*/_jsxs(\"table\",{className:\"weatherTable\",children:[this.header(),this.mainBody(currentWeathers,this.props.temperature)]},nanoid()));return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:container});}}]);return WeatherCurrent;}(React.Component);export default WeatherCurrent;","map":{"version":3,"sources":["/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/components/current/WeatherCurrent.js"],"names":["React","WeatherCurrentService","Pagination","FiltersComponent","Link","getWeatherDescription","convertTemperature","nanoid","connect","createPost","i18n","WeatherCurrent","props","console","log","temperature","internationalizeDescriptions","descriptions","map","description","t","originalValue","id","internationalizeCountries","country","originalCountryName","code","addFilterOperatorToExistingFilterName","event","filterName","filterOperator","arr","state","filters","forEach","item","index","hasOwnProperty","onChangeFilter","keyExistsInArr","findIndexInFilters","setState","currentPage","isFilter","isAdditionalFilter","changeFilters","refreshWeathers","sortBy","weathers","concat","isAdditionalFilterCheck","createForecast","paginate","page","getWeathersOnSpecificPage","indexOfLastPost","itemsPerPage","indexOfFirstPost","slice","changeLanguage","language","isAscending","loading","pageNumbers","countries","showPages","filterComponent","retrieveAllCountries","retrieveAllDescriptions","data","units","retrieveAllWeathers","then","response","key","exists","Array","isArray","some","includes","indexOfKey","Object","keys","length","splice","isNotAdditionalFilterWithContains","isSameFilterChanged","currentPosts","weather","_id","pathname","coord","lat","lon","name","sys","countryName","weatherMain","humidity","feels_like","toFixed","abbreviation","temp","temp_max","temp_min","currentWeathers","pagination","container","push","header","mainBody","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport WeatherCurrentService from '../../adapters/WeatherCurrentService';\nimport Pagination from '../current/Pagination'\nimport FiltersComponent from './Filters'\nimport { Link } from \"react-router-dom\";\nimport {getWeatherDescription, convertTemperature} from '../../businessLogic/WeatherBusinessLogic';\nimport '../../styles/common/Header.scss';\nimport { nanoid } from \"nanoid\";\nimport { connect } from 'react-redux';\nimport { createPost } from '../../actions/WeatherCurrentActions';\nimport i18n from 'i18next'\n\nclass WeatherCurrent extends React.Component {\n    constructor(props) {\n        console.log(props.temperature)\n        super(props)\n        this.state = {\n            weathers: [],\n            isAscending: true,\n            filters: [],\n            isFilter : false,\n            currentPage : 1,\n            itemsPerPage : 1000,\n            loading : false,\n            isAdditionalFilter : false,\n            pageNumbers : [],\n            countries : [],\n            descriptions: [],\n            showPages: 5,\n            language: i18n.language,\n            filterComponent: null,\n            temperature: props.temperature\n        }\n    }\n\n    //I added temperatureDropdownList, filterscomponent and header here because I do not want to rerender them\n    //on every update. I cant use shouldComponentUpdate because they either are not components or are functional\n    //meaning they are stateless\n    async componentDidMount() {\n        console.log(\"componentDidMount\")\n        console.log(this.state.temperature)\n        const countries = await WeatherCurrentService.retrieveAllCountries()\n        const descriptions = await WeatherCurrentService.retrieveAllDescriptions()\n        this.setState({countries : countries.data, descriptions : (descriptions.data),\n            filterComponent: <FiltersComponent key={nanoid()} temperatureUnits = {this.state.temperature.units} countries = {this.internationalizeCountries(countries.data)}\n            descriptions = {this.internationalizeDescriptions(descriptions.data)} onChangeMethod={this.onChangeFilter} />\n        },\n            function() {this.refreshWeathers()}\n        )\n        \n    }\n    \n    // shouldComponentUpdate(nextProps, nextState) {\n        // console.log(\"this.state.filters\" + JSON.stringify(this.state.filters) + \" nextState.filters: \" + JSON.stringify(nextState.filters))\n        // console.log(JSON.stringify(this.state.filters) === JSON.stringify(nextState.filters))\n        // if (JSON.stringify(this.state.filters) === JSON.stringify(nextState.filters)) {\n            // \n        //   return false;\n        // }\n        // return true;\n    //   }\n    // componentDidUpdate(){\n    //     this.setState({description = {this.internationalizeDescriptions}})\n    // }\n    internationalizeDescriptions = (descriptions) => {\n        return descriptions.map( (description) => (\n            {\"name\" : i18n.t(\"common.description.\" + description.originalValue), \"id\": description.id, \"originalValue\" : description.originalValue}\n        ))\n    }\n\n    internationalizeCountries = (descriptions) => {\n        return descriptions.map( (country) => {\n            // console.log(country)\n         return {\"countryName\" : i18n.t(\"common.countryName.\" + country.originalCountryName), \"id\": country.code, \"originalCountryName\" : country.originalCountryName}\n        })\n    }\n    refreshWeathers(sortBy, weathers) {\n\n        WeatherCurrentService.retrieveAllWeathers(sortBy, this.state.isAscending, this.state.filters, this.state.isFilter, this.state.isAdditionalFilter, weathers)\n            .then(\n                response => {\n                    this.setState({ weathers: response.data })\n                }\n            ).then( () => {if (sortBy) this.setState({isAscending : !this.state.isAscending})}\n            ).then( () => {if (typeof this.state.filters !== 'undefined' && this.state.filters === 0) this.setState({isFilter : false})})\n    }\n\n    keyExistsInArr(arr, key){\n        let exists = false\n        if (!Array.isArray(key)){\n            arr?.some(item => {\n                if(item.hasOwnProperty([key])) {\n                    exists = true;\n                    return true\n                }\n                else return false\n            })\n        }\n        //since countries and descriptions is a multicheckbox, they are arrays and it has multiple keys and must check not with equals\n        else{\n            arr?.some(item => {\n                if(item.includes([key])) {\n                    exists = true;\n                    return true\n                }\n                else return false\n            })\n        }\n        return exists\n    }\n\n    findIndexInFilters(arr, key){\n        let indexOfKey = 0\n        arr?.some((filterName, index, filters) => {\n            if(filterName.hasOwnProperty([key])){ \n                indexOfKey = index\n                return indexOfKey\n            }\n            else return false\n        })\n        return indexOfKey\n    }\n\n    changeFilters(index, filterName, filterOperator) {\n        let arr = this.state.filters\n\n        if (arr[index][filterName][filterOperator])\n            delete arr[index][filterName][filterOperator]  \n        if (Object.keys(arr[index][filterName]).length === 0)\n            arr.splice(index, 1)\n        return arr\n    }\n\n    addFilterOperatorToExistingFilterName = (event, filterName, filterOperator) => {\n        const arr = this.state.filters\n        arr.forEach((item, index, filters) => {\n            if (item.hasOwnProperty([filterName])){\n                filters[index][filterName][filterOperator] = event\n            }\n        })\n        return arr\n    }\n\n    onChangeFilter = (event, filterName, filterOperator) => {\n        var index;\n\n        if (event === \"\" && this.keyExistsInArr(this.state.filters,filterName))  {\n\n            index = this.findIndexInFilters(this.state.filters, filterName)\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : false, filters : this.changeFilters(index, filterName, filterOperator)}, function () {\n                this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n        }\n\n        else if (event !== \"\" && !(this.keyExistsInArr(this.state.filters, filterName))){\n\n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : true,\n                 filters: this.state.filters.concat([{[filterName]: {[filterOperator] : event}}])}, function () {\n                this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n\n        }\n\n        else if (event !== \"\" && (this.keyExistsInArr(this.state.filters, filterName))){\n           \n            index = this.findIndexInFilters(this.state.filters, filterName)\n\n            \n            this.setState({currentPage : 1, isFilter : true, isAdditionalFilter : this.isAdditionalFilterCheck(event, index, filterName, filterOperator), \n                filters : this.addFilterOperatorToExistingFilterName(event, filterName, filterOperator)}, function() {\n                    this.refreshWeathers(this.state.sortBy, this.state.weathers)\n            })\n           \n        }\n        else {\n\n        }\n    }\n\n    isAdditionalFilterCheck(event, index, filterName, filterOperator){\n        if (this.isNotAdditionalFilterWithContains(event) === false)\n            return false\n        if (this.isSameFilterChanged(event, index, filterName, filterOperator) === false)\n            return false\n        return true\n                \n    }   \n\n    //if there are multiple countries and descriptions, backend must make a new query\n    //since no additional filter is added, only value. I am unable to send query request\n    //with an array element\n    isNotAdditionalFilterWithContains(event){\n       return event.includes(\",\") ? false : true\n    }\n    \n    // this check is here for times when I change the same filter multiple\n    // times in a row and the filter is same. If it is the same I cant filter\n    // from memory because I could not load some weathers\n    isSameFilterChanged(event, index, filterName, filterOperator){\n       return filterName === this.state.filters[index][filterName]\n    }\n    header(){\n       return (<thead className=\"header\">\n       <tr>\n           <th onClick={() =>this.refreshWeathers(\"_id\", this.state.weathers) }>{i18n.t(\"current.header.cityId\")}</th>\n           <th onClick={() =>this.refreshWeathers(\"name\", this.state.weathers) }>{ i18n.t('current.header.cityName')}</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lat\", this.state.weathers) }>{i18n.t(\"current.header.latitude\")}</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lon\", this.state.weathers) }>{i18n.t(\"current.header.longitude\")}</th>\n           <th onClick={() =>this.refreshWeathers(\"sys.countryName\", this.state.weathers) }>{i18n.t(\"current.header.country\")}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.humidity\", this.state.weathers) }>{i18n.t(\"current.header.humidity\")}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.feels_like\", this.state.weathers) }>{i18n.t(\"current.header.feelsLike\")}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp\", this.state.weathers) }>{i18n.t(\"current.header.temperature\")}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_max\", this.state.weathers) }>{i18n.t(\"current.header.maximumTemperature\")}</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_min\", this.state.weathers) }>{i18n.t(\"current.header.minimalTemperature\")}</th>\n           <th onClick={() =>this.refreshWeathers(\"weather.description\", this.state.weathers) }>{i18n.t(\"current.header.description\")}</th>                                \n       </tr>\n   </thead>)\n   }\n\ncreateForecast = ()=>{\n    return (\n        <Link  to= '/forecast'></Link>\n    );\n}\n\n   mainBody(currentPosts, temperature){\n       console.log(temperature.units)\n    return (\n\n    <tbody>\n        {\n            currentPosts.map(\n                weather =>{\n                    return (<tr key={nanoid()}>\n                        <td>{weather._id}</td>\n                        <td> <Link to={{pathname: \"/forecast\", state: {\"lat\": weather.coord.lat, \"lon\": weather.coord.lon} }}>{weather.name}</Link></td>\n                        <td>{weather.coord.lat}</td>\n                        <td>{weather.coord.lon}</td>\n                        <td>{i18n.t(`common.countryName.${weather.sys.countryName}`)}</td>\n                        <td>{weather.weatherMain.humidity}</td>\n                        <td>{`${convertTemperature(temperature.units, weather.weatherMain.feels_like)?.toFixed(2)}${temperature.abbreviation}`}</td>\n                        <td>{`${convertTemperature(temperature.units, weather.weatherMain.temp)?.toFixed(2)}${temperature.abbreviation}`}</td>\n                        <td>{`${convertTemperature(temperature.units, weather.weatherMain.temp_max)?.toFixed(2)}${temperature.abbreviation}`}</td>\n                        <td>{`${convertTemperature(temperature.units, weather.weatherMain.temp_min)?.toFixed(2)}${temperature.abbreviation}`}</td>\n                        <td>{getWeatherDescription(weather)}</td>\n                    </tr>)}\n            )\n        }\n        </tbody>\n    )\n   }\n\n    paginate = (page) => {\n        // if(currentPage !== 0 && currentPage <= lastPage)\n       this.setState({currentPage : page}, function(){\n       })\n\n    }\n\n    getWeathersOnSpecificPage = () => {\n        const indexOfLastPost = this.state.currentPage * this.state.itemsPerPage;\n        const indexOfFirstPost = indexOfLastPost - this.state.itemsPerPage;\n        return this.state.weathers.slice(indexOfFirstPost, indexOfLastPost);\n    }\n\n    changeLanguage = (language, i18n) => {\n        i18n.changeLanguage(language);\n        this.setState({}, () =>{\n            this.setState({language: language})\n        })\n    };\n\n    render() {\n        console.log(\"som v render\")\n        const currentWeathers = this.getWeathersOnSpecificPage()\n        const descriptions = this.internationalizeDescriptions(this.state.descriptions)\n        const countries = this.internationalizeCountries(this.state.countries)\n        // let filters =     (\n            // this.state.filterComponent)\n        \n        let filters = <FiltersComponent key={nanoid()} temperatureUnits = {this.props.temperature.units} countries = {countries}\n            descriptions = {this.internationalizeDescriptions(descriptions)}\n            filters = {this.state.filters} onChangeMethod={this.onChangeFilter} temperature={this.props.temperature} />\n\n        const pagination = <Pagination key={nanoid()} currentPage={this.state.currentPage} showPages={this.state.showPages}\n        itemsPerPage = {this.state.itemsPerPage} totalItems = {this.state.weathers.length} paginate={this.paginate}/>\n\n        // const temperatureDropdownListComponent = temperatureDropdownList( (units, abbreviation ) => {\n            // this.setState({\"temperature\": {\"units\" : units, \"abbreviation\" : abbreviation}})\n        // })\n        let container= [filters, pagination]\n\n        if (this.state.weathers)\n            container.push(<table key={nanoid()} className=\"weatherTable\">\n                {this.header()}\n                {this.mainBody(currentWeathers, this.props.temperature)}\n            </table>\n            )\n\n        return (\n            <div className=\"container\">\n\n                {container}\n            </div>\n        )\n         \n    }\n}\nexport default WeatherCurrent\n"]},"metadata":{},"sourceType":"module"}