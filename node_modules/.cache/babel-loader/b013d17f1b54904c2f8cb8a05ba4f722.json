{"ast":null,"code":"import _defineProperty from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import WeatherService from'../service/WeatherService';import Pagination from'./Pagination';var WeatherListComponent=/*#__PURE__*/function(_Component){_inherits(WeatherListComponent,_Component);var _super=_createSuper(WeatherListComponent);function WeatherListComponent(props){var _this;_classCallCheck(this,WeatherListComponent);_this=_super.call(this,props);_this.state={weathers:[],isAscending:true,filters:[],isFilter:false,currentPage:1,itemsPerPage:1000,loading:false,pageNumbers:[]};return _this;}_createClass(WeatherListComponent,[{key:\"componentDidMount\",value:function componentDidMount(){console.log(\"som v componentDidMOunt\");this.refreshWeathers();}},{key:\"refreshWeathers\",value:function refreshWeathers(sortBy,weathers){var _this2=this;WeatherService.retrieveAllWeathers(sortBy,this.state.isAscending,this.state.filters,this.state.isFilter,weathers).then(function(response){_this2.setState({weathers:response.data});}).then(function(){if(sortBy)_this2.setState({isAscending:!_this2.state.isAscending});}).then(function(){if(typeof _this2.state.filters!=='undefined'&&_this2.state.pageNumbers.filters===0)_this2.setState({isFilter:false});});}},{key:\"keyExistsInArr\",value:function keyExistsInArr(arr,key){arr===null||arr===void 0?void 0:arr.some(function(item){if(item.hasOwnProperty([key]))return true;else return false;});return false;}},{key:\"findIndexInFilters\",value:function findIndexInFilters(arr,key){var indexOfKey=0;arr===null||arr===void 0?void 0:arr.some(function(filterName,index,filters){if(filterName.hasOwnProperty([key])){indexOfKey=index;return indexOfKey;}else return false;});return indexOfKey;}},{key:\"onBlurEvent\",value:function onBlurEvent(event,filterName,filterOperator){if(event.target.value===\"\"&&this.keyExistsInArr(this.state.filters,filterName)){this.setState({currentPage:1});console.log(\"inside 1\");this.setState({isFilter:true});// this.state.currentPage = 0\nvar index=this.findIndexInFilters(this.state.filters,filterName);if(this.state.filters[index][filterName][filterOperator])delete this.state.filters[index][filterName][filterOperator];console.log(\"filters is: \"+JSON.stringify(this.state.filters));console.log(\"filters length: \"+this.state.filters.length);if(Object.keys(this.state.filters[index][filterName]).length===0)this.state.filters.splice(index,1);console.log(\"filters is: \"+JSON.stringify(this.state.filters));console.log(\"filters length: \"+this.state.filters.length);console.log(\"typeof this.state.filters !== 'undefined' && this.state.filters.length === 0\"+typeof this.state.filters!=='undefined'&&this.state.filters.length===0);if(typeof this.state.filters!=='undefined'&&this.state.filters.length===0)this.setState({isFilter:false});this.refreshWeathers(this.state.sortBy,this.state.weathers);}else if(event.target.value!==\"\"&&!this.keyExistsInArr(this.state.filters,filterName)){this.setState({currentPage:1});console.log(\"inside 2\");this.setState({isFilter:true});// this.state.currentPage = 0\nthis.state.filters.push(_defineProperty({},filterName,_defineProperty({},filterOperator,event.target.value)));this.refreshWeathers(this.state.sortBy,this.state.weathers);}else if(event.target.value!==\"\"&&this.keyExistsInArr(this.state.filters,filterName)){this.setState({currentPage:1});console.log(\"inside 3\");this.setState({isFilter:true});// this.state.currentPage = 0\nthis.state.filters.forEach(function(item,index,filters){if(item.hasOwnProperty([filterName])){filters[index][filterName][filterOperator]=event.target.value;}});this.refreshWeathers(this.state.sortBy,this.state.weathers);}else{console.log(\"inside 4\");}}},{key:\"filters\",value:function filters(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Id\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"_id\",\"eq\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"City name\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"name\",\"eq\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Country\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"sys.country\",\"eq\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Latitude smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"coord.lat\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Latitude bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"coord.lat\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Longitude smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"coord.lon\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Longitude bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"coord.lon\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Humidity smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.humidity\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Humidity bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.humidity\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Feel temperature smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.feels_like\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Feel temperature bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.feels_like\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature max smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp_max\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature max bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp_max\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature min smaller than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp_min\",\"lte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Temperature min bigger than\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"weatherMain.temp_min\",\"gte\");}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\",onBlur:function onBlur(event){_this3.onBlurEvent(event,\"description\",\"eq\");}})]});}},{key:\"header\",value:function header(){var _this4=this;return/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"_id\",_this4.state.weathers);},children:\"cityId\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"name\",_this4.state.weathers);},children:\"city Name\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"coord.lat\",_this4.state.weathers);},children:\"latitude\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"coord.lon\",_this4.state.weathers);},children:\"longitude\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"sys.country\",_this4.state.weathers);},children:\"country\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.humidity\",_this4.state.weathers);},children:\"humidity\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.feels_like\",_this4.state.weathers);},children:\"feels like\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.temp\",_this4.state.weathers);},children:\"temperature\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.temp_max\",_this4.state.weathers);},children:\"maximum temperature\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"weatherMain.temp_min\",_this4.state.weathers);},children:\"minimal temperature\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return _this4.refreshWeathers(\"description\",_this4.state.weathers);},children:\"description\"})]})});}},{key:\"mainBody\",value:function mainBody(currentPosts){return/*#__PURE__*/_jsx(\"tbody\",{children:currentPosts.map(function(weather){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:weather._id}),/*#__PURE__*/_jsx(\"td\",{children:weather.name}),/*#__PURE__*/_jsx(\"td\",{children:weather.coord.lat}),/*#__PURE__*/_jsx(\"td\",{children:weather.coord.lon}),/*#__PURE__*/_jsx(\"td\",{children:weather.sys.country}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.humidity}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.feels_like}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.temp}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.temp_max}),/*#__PURE__*/_jsx(\"td\",{children:weather.weatherMain.temp_min}),/*#__PURE__*/_jsx(\"td\",{children:weather.weather[0].description})]},weather._id);})});}},{key:\"paginate\",value:function paginate(currentPage){this.setState({currentPage:currentPage});}},{key:\"render\",value:function render(){var _this5=this;console.log(\"som v render\");//to set page\nvar paginate=function paginate(currentPage){return _this5.setState({currentPage:currentPage});};var pagination=/*#__PURE__*/_jsx(Pagination,{itemsPerPage:this.state.itemsPerPage,totalItems:this.state.weathers.length,currentPage:1,paginate:paginate});var indexOfLastPost=this.state.currentPage*this.state.itemsPerPage;var indexOfFirstPost=indexOfLastPost-this.state.itemsPerPage;var currentWeathers=this.state.weathers.slice(indexOfFirstPost,indexOfLastPost);var container=[this.filters(),pagination];if(this.state.weathers)container.push(/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[this.header(),this.mainBody(currentWeathers)]}));console.log(\"items per page: \"+this.state.itemsPerPage);console.log(\"currentPage: \"+this.state.currentPage);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:container});}}]);return WeatherListComponent;}(Component);export default WeatherListComponent;","map":{"version":3,"sources":["/home/prepelicamangalica/WorkspaceGit/SuperProjekt/src/main/ui/src/component/WeatherListComponent.js"],"names":["React","Component","WeatherService","Pagination","WeatherListComponent","props","state","weathers","isAscending","filters","isFilter","currentPage","itemsPerPage","loading","pageNumbers","console","log","refreshWeathers","sortBy","retrieveAllWeathers","then","response","setState","data","arr","key","some","item","hasOwnProperty","indexOfKey","filterName","index","event","filterOperator","target","value","keyExistsInArr","findIndexInFilters","JSON","stringify","length","Object","keys","splice","push","forEach","onBlurEvent","currentPosts","map","weather","_id","name","coord","lat","lon","sys","country","weatherMain","humidity","feels_like","temp","temp_max","temp_min","description","paginate","pagination","indexOfLastPost","indexOfFirstPost","currentWeathers","slice","container","header","mainBody"],"mappings":"+xBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,cAAP,KAA2B,2BAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,C,GAEMC,CAAAA,oB,4HACF,8BAAYC,KAAZ,CAAmB,sDACf,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACTC,QAAQ,CAAE,EADD,CAETC,WAAW,CAAE,IAFJ,CAGTC,OAAO,CAAE,EAHA,CAITC,QAAQ,CAAG,KAJF,CAKTC,WAAW,CAAG,CALL,CAMTC,YAAY,CAAG,IANN,CAOTC,OAAO,CAAG,KAPD,CAQTC,WAAW,CAAG,EARL,CAAb,CAFe,aAYlB,C,8FAEmB,CAChBC,OAAO,CAACC,GAAR,CAAY,yBAAZ,EACA,KAAKC,eAAL,GACH,C,wDAEeC,M,CAAQX,Q,CAAU,iBAC9BL,cAAc,CAACiB,mBAAf,CAAmCD,MAAnC,CAA2C,KAAKZ,KAAL,CAAWE,WAAtD,CAAmE,KAAKF,KAAL,CAAWG,OAA9E,CAAuF,KAAKH,KAAL,CAAWI,QAAlG,CAA4GH,QAA5G,EACKa,IADL,CAEQ,SAAAC,QAAQ,CAAI,CACR,MAAI,CAACC,QAAL,CAAc,CAAEf,QAAQ,CAAEc,QAAQ,CAACE,IAArB,CAAd,EAEH,CALT,EAMMH,IANN,CAMY,UAAM,CAAC,GAAIF,MAAJ,CAAY,MAAI,CAACI,QAAL,CAAc,CAACd,WAAW,CAAG,CAAC,MAAI,CAACF,KAAL,CAAWE,WAA3B,CAAd,EAAuD,CANtF,EAOMY,IAPN,CAOY,UAAM,CAAC,GAAI,MAAO,CAAA,MAAI,CAACd,KAAL,CAAWG,OAAlB,GAA8B,WAA9B,EAA6C,MAAI,CAACH,KAAL,CAAWQ,WAAX,CAAuBL,OAAvB,GAAmC,CAApF,CAAuF,MAAI,CAACa,QAAL,CAAc,CAACZ,QAAQ,CAAG,KAAZ,CAAd,EAAkC,CAP5I,EAQH,C,sDAEcc,G,CAAKC,G,CAAI,CACpBD,GAAG,OAAH,EAAAA,GAAG,SAAH,QAAAA,GAAG,CAAEE,IAAL,CAAU,SAAAC,IAAI,CAAI,CACd,GAAGA,IAAI,CAACC,cAAL,CAAoB,CAACH,GAAD,CAApB,CAAH,CACI,MAAO,KAAP,CADJ,IAEK,OAAO,MAAP,CACR,CAJD,EAKA,MAAO,MAAP,CACH,C,8DAEkBD,G,CAAKC,G,CAAI,CACxB,GAAII,CAAAA,UAAU,CAAG,CAAjB,CACAL,GAAG,OAAH,EAAAA,GAAG,SAAH,QAAAA,GAAG,CAAEE,IAAL,CAAU,SAACI,UAAD,CAAaC,KAAb,CAAoBtB,OAApB,CAAgC,CACtC,GAAGqB,UAAU,CAACF,cAAX,CAA0B,CAACH,GAAD,CAA1B,CAAH,CAAoC,CAChCI,UAAU,CAAGE,KAAb,CACA,MAAOF,CAAAA,UAAP,CACH,CAHD,IAIK,OAAO,MAAP,CACR,CAND,EAOA,MAAOA,CAAAA,UAAP,CACH,C,gDAEWG,K,CAAOF,U,CAAYG,c,CAAe,CAC1C,GAAID,KAAK,CAACE,MAAN,CAAaC,KAAb,GAAuB,EAAvB,EAA6B,KAAKC,cAAL,CAAoB,KAAK9B,KAAL,CAAWG,OAA/B,CAAuCqB,UAAvC,CAAjC,CAAsF,CAClF,KAAKR,QAAL,CAAc,CAACX,WAAW,CAAG,CAAf,CAAd,EAEAI,OAAO,CAACC,GAAR,CAAY,UAAZ,EACA,KAAKM,QAAL,CAAc,CAACZ,QAAQ,CAAG,IAAZ,CAAd,EACA;AACA,GAAIqB,CAAAA,KAAK,CAAG,KAAKM,kBAAL,CAAwB,KAAK/B,KAAL,CAAWG,OAAnC,CAA4CqB,UAA5C,CAAZ,CAEA,GAAI,KAAKxB,KAAL,CAAWG,OAAX,CAAmBsB,KAAnB,EAA0BD,UAA1B,EAAsCG,cAAtC,CAAJ,CACI,MAAO,MAAK3B,KAAL,CAAWG,OAAX,CAAmBsB,KAAnB,EAA0BD,UAA1B,EAAsCG,cAAtC,CAAP,CAEAlB,OAAO,CAACC,GAAR,CAAY,eAAiBsB,IAAI,CAACC,SAAL,CAAe,KAAKjC,KAAL,CAAWG,OAA1B,CAA7B,EACAM,OAAO,CAACC,GAAR,CAAY,mBAAqB,KAAKV,KAAL,CAAWG,OAAX,CAAmB+B,MAApD,EAEJ,GAAIC,MAAM,CAACC,IAAP,CAAY,KAAKpC,KAAL,CAAWG,OAAX,CAAmBsB,KAAnB,EAA0BD,UAA1B,CAAZ,EAAmDU,MAAnD,GAA8D,CAAlE,CACI,KAAKlC,KAAL,CAAWG,OAAX,CAAmBkC,MAAnB,CAA0BZ,KAA1B,CAAiC,CAAjC,EACAhB,OAAO,CAACC,GAAR,CAAY,eAAiBsB,IAAI,CAACC,SAAL,CAAe,KAAKjC,KAAL,CAAWG,OAA1B,CAA7B,EACAM,OAAO,CAACC,GAAR,CAAY,mBAAqB,KAAKV,KAAL,CAAWG,OAAX,CAAmB+B,MAApD,EACAzB,OAAO,CAACC,GAAR,CAAY,+EAAiF,MAAO,MAAKV,KAAL,CAAWG,OAAnG,GAA+G,WAA/G,EAA8H,KAAKH,KAAL,CAAWG,OAAX,CAAmB+B,MAAnB,GAA8B,CAAxK,EACJ,GAAI,MAAO,MAAKlC,KAAL,CAAWG,OAAlB,GAA8B,WAA9B,EAA6C,KAAKH,KAAL,CAAWG,OAAX,CAAmB+B,MAAnB,GAA8B,CAA/E,CAAkF,KAAKlB,QAAL,CAAc,CAACZ,QAAQ,CAAG,KAAZ,CAAd,EAElF,KAAKO,eAAL,CAAqB,KAAKX,KAAL,CAAWY,MAAhC,CAAwC,KAAKZ,KAAL,CAAWC,QAAnD,EACH,CAtBD,IAwBK,IAAIyB,KAAK,CAACE,MAAN,CAAaC,KAAb,GAAuB,EAAvB,EAA6B,CAAE,KAAKC,cAAL,CAAoB,KAAK9B,KAAL,CAAWG,OAA/B,CAAwCqB,UAAxC,CAAnC,CAAwF,CACzF,KAAKR,QAAL,CAAc,CAACX,WAAW,CAAG,CAAf,CAAd,EAEAI,OAAO,CAACC,GAAR,CAAY,UAAZ,EACA,KAAKM,QAAL,CAAc,CAACZ,QAAQ,CAAG,IAAZ,CAAd,EACA;AAEA,KAAKJ,KAAL,CAAWG,OAAX,CAAmBmC,IAAnB,oBAA0Bd,UAA1B,oBAAyCG,cAAzC,CAA2DD,KAAK,CAACE,MAAN,CAAaC,KAAxE,IACA,KAAKlB,eAAL,CAAqB,KAAKX,KAAL,CAAWY,MAAhC,CAAwC,KAAKZ,KAAL,CAAWC,QAAnD,EACH,CATI,IAWA,IAAIyB,KAAK,CAACE,MAAN,CAAaC,KAAb,GAAuB,EAAvB,EAA8B,KAAKC,cAAL,CAAoB,KAAK9B,KAAL,CAAWG,OAA/B,CAAwCqB,UAAxC,CAAlC,CAAuF,CACxF,KAAKR,QAAL,CAAc,CAACX,WAAW,CAAG,CAAf,CAAd,EAEAI,OAAO,CAACC,GAAR,CAAY,UAAZ,EACA,KAAKM,QAAL,CAAc,CAACZ,QAAQ,CAAG,IAAZ,CAAd,EACA;AAEA,KAAKJ,KAAL,CAAWG,OAAX,CAAmBoC,OAAnB,CAA2B,SAAClB,IAAD,CAAOI,KAAP,CAActB,OAAd,CAA0B,CACjD,GAAIkB,IAAI,CAACC,cAAL,CAAoB,CAACE,UAAD,CAApB,CAAJ,CAAsC,CAClCrB,OAAO,CAACsB,KAAD,CAAP,CAAeD,UAAf,EAA2BG,cAA3B,EAA6CD,KAAK,CAACE,MAAN,CAAaC,KAA1D,CACH,CACJ,CAJD,EAKA,KAAKlB,eAAL,CAAqB,KAAKX,KAAL,CAAWY,MAAhC,CAAwC,KAAKZ,KAAL,CAAWC,QAAnD,EACH,CAbI,IAcA,CACDQ,OAAO,CAACC,GAAR,CAAY,UAAZ,EAEH,CACJ,C,yCAEQ,iBACL,mBAAQ,aAAK,SAAS,CAAC,KAAf,wBACP,iBAAU,WAAW,CAAE,IAAvB,CAA4B,MAAM,CAAG,gBAAAgB,KAAK,CAAI,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,KAAxB,CAA+B,IAA/B,EAAqC,CAApF,EADO,cAEP,iBAAU,WAAW,CAAE,WAAvB,CAAmC,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,MAAxB,CAAgC,IAAhC,EAAsC,CAA3F,EAFO,cAGP,iBAAU,WAAW,CAAE,SAAvB,CAAiC,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,aAAxB,CAAuC,IAAvC,EAA6C,CAAhG,EAHO,cAIP,iBAAU,WAAW,CAAE,uBAAvB,CAA+C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,WAAxB,CAAqC,KAArC,EAA4C,CAA7G,EAJO,cAKP,iBAAU,WAAW,CAAE,sBAAvB,CAA8C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,WAAxB,CAAqC,KAArC,EAA4C,CAA5G,EALO,cAMP,iBAAU,WAAW,CAAE,wBAAvB,CAAgD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,WAAxB,CAAqC,KAArC,EAA4C,CAA9G,EANO,cAOP,iBAAU,WAAW,CAAE,uBAAvB,CAA+C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,WAAxB,CAAqC,KAArC,EAA4C,CAA7G,EAPO,cAQP,iBAAU,WAAW,CAAE,uBAAvB,CAA+C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAAxH,EARO,cASP,iBAAU,WAAW,CAAE,sBAAvB,CAA8C,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAAvH,EATO,cAUP,iBAAU,WAAW,CAAE,+BAAvB,CAAuD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,wBAAxB,CAAkD,KAAlD,EAAyD,CAAlI,EAVO,cAWP,iBAAU,WAAW,CAAE,8BAAvB,CAAsD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,wBAAxB,CAAkD,KAAlD,EAAyD,CAAjI,EAXO,cAYP,iBAAU,WAAW,CAAE,0BAAvB,CAAkD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,kBAAxB,CAA4C,KAA5C,EAAmD,CAAvH,EAZO,cAaP,iBAAU,WAAW,CAAE,yBAAvB,CAAiD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,kBAAxB,CAA4C,KAA5C,EAAmD,CAAtH,EAbO,cAcP,iBAAU,WAAW,CAAE,8BAAvB,CAAsD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAA/H,EAdO,cAeP,iBAAU,WAAW,CAAE,6BAAvB,CAAqD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAA9H,EAfO,cAgBP,iBAAU,WAAW,CAAE,8BAAvB,CAAsD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAA/H,EAhBO,cAiBP,iBAAU,WAAW,CAAE,6BAAvB,CAAqD,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,sBAAxB,CAAgD,KAAhD,EAAuD,CAA9H,EAjBO,cAkBP,iBAAU,WAAW,CAAE,aAAvB,CAAqC,MAAM,CAAG,gBAAAA,KAAK,CAAG,CAAC,MAAI,CAACc,WAAL,CAAiBd,KAAjB,CAAwB,aAAxB,CAAuC,IAAvC,EAA6C,CAApG,EAlBO,GAAR,CAoBJ,C,uCAEO,iBACJ,mBAAQ,oCACR,mCACI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACf,eAAL,CAAqB,KAArB,CAA4B,MAAI,CAACX,KAAL,CAAWC,QAAvC,CAAL,EAAb,oBADJ,cAEI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,MAArB,CAA6B,MAAI,CAACX,KAAL,CAAWC,QAAxC,CAAL,EAAb,uBAFJ,cAGI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,WAArB,CAAkC,MAAI,CAACX,KAAL,CAAWC,QAA7C,CAAL,EAAb,sBAHJ,cAII,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,WAArB,CAAkC,MAAI,CAACX,KAAL,CAAWC,QAA7C,CAAL,EAAb,uBAJJ,cAKI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,aAArB,CAAoC,MAAI,CAACX,KAAL,CAAWC,QAA/C,CAAL,EAAb,qBALJ,cAMI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,sBAArB,CAA6C,MAAI,CAACX,KAAL,CAAWC,QAAxD,CAAL,EAAb,sBANJ,cAOI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,wBAArB,CAA+C,MAAI,CAACX,KAAL,CAAWC,QAA1D,CAAL,EAAb,wBAPJ,cAQI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,kBAArB,CAAyC,MAAI,CAACX,KAAL,CAAWC,QAApD,CAAL,EAAb,yBARJ,cASI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,sBAArB,CAA6C,MAAI,CAACX,KAAL,CAAWC,QAAxD,CAAL,EAAb,iCATJ,cAUI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,sBAArB,CAA6C,MAAI,CAACX,KAAL,CAAWC,QAAxD,CAAL,EAAb,iCAVJ,cAWI,WAAI,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACU,eAAL,CAAqB,aAArB,CAAoC,MAAI,CAACX,KAAL,CAAWC,QAA/C,CAAL,EAAb,yBAXJ,GADQ,EAAR,CAeH,C,0CAEQwC,Y,CAAa,CACrB,mBAEA,uBAEQA,YAAY,CAACC,GAAb,CACI,SAAAC,OAAO,qBACH,mCACI,oBAAKA,OAAO,CAACC,GAAb,EADJ,cAEI,oBAAKD,OAAO,CAACE,IAAb,EAFJ,cAGI,oBAAKF,OAAO,CAACG,KAAR,CAAcC,GAAnB,EAHJ,cAII,oBAAKJ,OAAO,CAACG,KAAR,CAAcE,GAAnB,EAJJ,cAKI,oBAAKL,OAAO,CAACM,GAAR,CAAYC,OAAjB,EALJ,cAMI,oBAAKP,OAAO,CAACQ,WAAR,CAAoBC,QAAzB,EANJ,cAOI,oBAAKT,OAAO,CAACQ,WAAR,CAAoBE,UAAzB,EAPJ,cAQI,oBAAKV,OAAO,CAACQ,WAAR,CAAoBG,IAAzB,EARJ,cASI,oBAAKX,OAAO,CAACQ,WAAR,CAAoBI,QAAzB,EATJ,cAUI,oBAAKZ,OAAO,CAACQ,WAAR,CAAoBK,QAAzB,EAVJ,cAWI,oBAAKb,OAAO,CAACA,OAAR,CAAgB,CAAhB,EAAmBc,WAAxB,EAXJ,GAASd,OAAO,CAACC,GAAjB,CADG,EADX,CAFR,EAFA,CAwBA,C,0CAESvC,W,CAAY,CAClB,KAAKW,QAAL,CAAc,CAACX,WAAW,CAAGA,WAAf,CAAd,EACF,C,uCAEQ,iBACLI,OAAO,CAACC,GAAR,CAAY,cAAZ,EAEA;AACA,GAAMgD,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACrD,WAAD,QAAiB,CAAA,MAAI,CAACW,QAAL,CAAc,CAACX,WAAW,CAAGA,WAAf,CAAd,CAAjB,EAAjB,CACA,GAAMsD,CAAAA,UAAU,cACZ,KAAC,UAAD,EAAY,YAAY,CAAI,KAAK3D,KAAL,CAAWM,YAAvC,CAAqD,UAAU,CAAI,KAAKN,KAAL,CAAWC,QAAX,CAAoBiC,MAAvF,CAA+F,WAAW,CAAI,CAA9G,CAAiH,QAAQ,CAAEwB,QAA3H,EADJ,CAIA,GAAME,CAAAA,eAAe,CAAG,KAAK5D,KAAL,CAAWK,WAAX,CAAyB,KAAKL,KAAL,CAAWM,YAA5D,CACA,GAAMuD,CAAAA,gBAAgB,CAAGD,eAAe,CAAG,KAAK5D,KAAL,CAAWM,YAAtD,CACA,GAAMwD,CAAAA,eAAe,CAAG,KAAK9D,KAAL,CAAWC,QAAX,CAAoB8D,KAApB,CAA0BF,gBAA1B,CAA4CD,eAA5C,CAAxB,CAEA,GAAII,CAAAA,SAAS,CAAE,CAAC,KAAK7D,OAAL,EAAD,CAAiBwD,UAAjB,CAAf,CAEA,GAAI,KAAK3D,KAAL,CAAWC,QAAf,CACI+D,SAAS,CAAC1B,IAAV,cAAe,eAAO,SAAS,CAAC,OAAjB,WACV,KAAK2B,MAAL,EADU,CAEV,KAAKC,QAAL,CAAcJ,eAAd,CAFU,GAAf,EAKJrD,OAAO,CAACC,GAAR,CAAY,mBAAqB,KAAKV,KAAL,CAAWM,YAA5C,EAEAG,OAAO,CAACC,GAAR,CAAY,gBAAkB,KAAKV,KAAL,CAAWK,WAAzC,EAEA,mBACI,YAAK,SAAS,CAAC,WAAf,UACE2D,SADF,EADJ,CAMH,C,kCAnN8BrE,S,EAqNnC,cAAeG,CAAAA,oBAAf","sourcesContent":["import React, { Component } from 'react'\nimport WeatherService from '../service/WeatherService';\nimport Pagination from './Pagination';\n\nclass WeatherListComponent extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            weathers: [],\n            isAscending: true,\n            filters: [],\n            isFilter : false,\n            currentPage : 1,\n            itemsPerPage : 1000,\n            loading : false,\n            pageNumbers : []\n        }\n    }\n\n    componentDidMount() {\n        console.log(\"som v componentDidMOunt\")\n        this.refreshWeathers();\n    }\n\n    refreshWeathers(sortBy, weathers) {\n        WeatherService.retrieveAllWeathers(sortBy, this.state.isAscending, this.state.filters, this.state.isFilter, weathers)\n            .then(\n                response => {\n                    this.setState({ weathers: response.data })\n\n                }\n            ).then( () => {if (sortBy) this.setState({isAscending : !this.state.isAscending})}\n            ).then( ()=>  {if (typeof this.state.filters !== 'undefined' && this.state.pageNumbers.filters === 0) this.setState({isFilter : false})})\n    }\n\n    keyExistsInArr(arr, key){\n        arr?.some(item => {\n            if(item.hasOwnProperty([key])) \n                return true\n            else return false\n        })\n        return false\n    }\n\n    findIndexInFilters(arr, key){\n        var indexOfKey = 0\n        arr?.some((filterName, index, filters) => {\n            if(filterName.hasOwnProperty([key])){ \n                indexOfKey = index\n                return indexOfKey\n            }\n            else return false\n        })\n        return indexOfKey\n    }\n\n    onBlurEvent(event, filterName, filterOperator){\n        if (event.target.value === \"\" && this.keyExistsInArr(this.state.filters,filterName))  {\n            this.setState({currentPage : 1})\n\n            console.log(\"inside 1\") \n            this.setState({isFilter : true})\n            // this.state.currentPage = 0\n            var index = this.findIndexInFilters(this.state.filters, filterName)\n\n            if (this.state.filters[index][filterName][filterOperator])\n                delete this.state.filters[index][filterName][filterOperator]  \n\n                console.log(\"filters is: \" + JSON.stringify(this.state.filters))\n                console.log(\"filters length: \" + this.state.filters.length)\n\n            if (Object.keys(this.state.filters[index][filterName]).length === 0)\n                this.state.filters.splice(index, 1)\n                console.log(\"filters is: \" + JSON.stringify(this.state.filters))\n                console.log(\"filters length: \" + this.state.filters.length)\n                console.log(\"typeof this.state.filters !== 'undefined' && this.state.filters.length === 0\" + typeof this.state.filters !== 'undefined' && this.state.filters.length === 0)\n            if (typeof this.state.filters !== 'undefined' && this.state.filters.length === 0) this.setState({isFilter : false})\n\n            this.refreshWeathers(this.state.sortBy, this.state.weathers)\n        }\n\n        else if (event.target.value !== \"\" && !(this.keyExistsInArr(this.state.filters, filterName))){\n            this.setState({currentPage : 1})\n\n            console.log(\"inside 2\")\n            this.setState({isFilter : true})\n            // this.state.currentPage = 0\n\n            this.state.filters.push({[filterName]: {[filterOperator] : event.target.value}})\n            this.refreshWeathers(this.state.sortBy, this.state.weathers)\n        }\n\n        else if (event.target.value !== \"\" && (this.keyExistsInArr(this.state.filters, filterName))){\n            this.setState({currentPage : 1})\n\n            console.log(\"inside 3\")        \n            this.setState({isFilter : true})\n            // this.state.currentPage = 0\n\n            this.state.filters.forEach((item, index, filters) => {\n                if (item.hasOwnProperty([filterName])){\n                    filters[index][filterName][filterOperator] = event.target.value\n                }\n            })\n            this.refreshWeathers(this.state.sortBy, this.state.weathers)\n        }\n        else {\n            console.log(\"inside 4\")\n\n        }\n    }\n\n   filters() {\n        return (<div className=\"row\">\n        {<textarea placeholder= \"Id\" onBlur= {event => {this.onBlurEvent(event, \"_id\", \"eq\")}}></textarea>}\n        {<textarea placeholder= \"City name\" onBlur= {event =>{this.onBlurEvent(event, \"name\", \"eq\")}}></textarea>}\n        {<textarea placeholder= \"Country\" onBlur= {event =>{this.onBlurEvent(event, \"sys.country\", \"eq\")}}></textarea>}\n        {<textarea placeholder= \"Latitude smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"coord.lat\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Latitude bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"coord.lat\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Longitude smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"coord.lon\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Longitude bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"coord.lon\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Humidity smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.humidity\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Humidity bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.humidity\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Feel temperature smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.feels_like\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Feel temperature bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.feels_like\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature max smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp_max\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature max bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp_max\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature min smaller than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp_min\", \"lte\")}}></textarea>}\n        {<textarea placeholder= \"Temperature min bigger than\" onBlur= {event =>{this.onBlurEvent(event, \"weatherMain.temp_min\", \"gte\")}}></textarea>}\n        {<textarea placeholder= \"Description\" onBlur= {event =>{this.onBlurEvent(event, \"description\", \"eq\")}}></textarea>}\n    </div>)\n   }\n\n   header(){\n       return (<thead>\n       <tr>\n           <th onClick={() =>this.refreshWeathers(\"_id\", this.state.weathers) }>cityId</th>\n           <th onClick={() =>this.refreshWeathers(\"name\", this.state.weathers) }>city Name</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lat\", this.state.weathers) }>latitude</th>\n           <th onClick={() =>this.refreshWeathers(\"coord.lon\", this.state.weathers) }>longitude</th>\n           <th onClick={() =>this.refreshWeathers(\"sys.country\", this.state.weathers) }>country</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.humidity\", this.state.weathers) }>humidity</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.feels_like\", this.state.weathers) }>feels like</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp\", this.state.weathers) }>temperature</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_max\", this.state.weathers) }>maximum temperature</th>\n           <th onClick={() =>this.refreshWeathers(\"weatherMain.temp_min\", this.state.weathers) }>minimal temperature</th>\n           <th onClick={() =>this.refreshWeathers(\"description\", this.state.weathers) }>description</th>                                \n       </tr>\n   </thead>)\n   }\n\n   mainBody(currentPosts){\n    return (\n\n    <tbody>\n        {\n            currentPosts.map(\n                weather =>\n                    <tr key={weather._id}>\n                        <td>{weather._id}</td>\n                        <td>{weather.name}</td>\n                        <td>{weather.coord.lat}</td>\n                        <td>{weather.coord.lon}</td>\n                        <td>{weather.sys.country}</td>\n                        <td>{weather.weatherMain.humidity}</td>\n                        <td>{weather.weatherMain.feels_like}</td>\n                        <td>{weather.weatherMain.temp}</td>\n                        <td>{weather.weatherMain.temp_max}</td>\n                        <td>{weather.weatherMain.temp_min}</td>\n                        <td>{weather.weather[0].description}</td>\n\n                    </tr>\n            )\n        }\n        </tbody>\n    )\n   }\n\n    paginate(currentPage){\n       this.setState({currentPage : currentPage})\n    }\n\n    render() {\n        console.log(\"som v render\")\n\n        //to set page\n        const paginate = (currentPage) => this.setState({currentPage : currentPage})\n        const pagination = (\n            <Pagination itemsPerPage = {this.state.itemsPerPage} totalItems = {this.state.weathers.length} currentPage = {1} paginate={paginate}/>\n        )\n\n        const indexOfLastPost = this.state.currentPage * this.state.itemsPerPage;\n        const indexOfFirstPost = indexOfLastPost - this.state.itemsPerPage;\n        const currentWeathers = this.state.weathers.slice(indexOfFirstPost, indexOfLastPost);\n\n        let container= [this.filters(), pagination]\n\n        if (this.state.weathers)\n            container.push(<table className=\"table\">\n                {this.header()}\n                {this.mainBody(currentWeathers)}\n            </table>)\n\n        console.log(\"items per page: \" + this.state.itemsPerPage)\n\n        console.log(\"currentPage: \" + this.state.currentPage)\n       \n        return (\n            <div className=\"container\">\n             {container}\n            </div>\n        )\n         \n    }\n}\nexport default WeatherListComponent\n"]},"metadata":{},"sourceType":"module"}